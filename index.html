<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Finyaci&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Finyaci&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Finyaci">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Finyaci's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Finyaci's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Hello!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/10/30/Git_BASIC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/30/Git_BASIC/" class="post-title-link" itemprop="url">Git Basic</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-10-30 13:43:22" itemprop="dateCreated datePublished" datetime="2020-10-30T13:43:22+08:00">2020-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-11-15 16:47:44" itemprop="dateModified" datetime="2020-11-15T16:47:44+08:00">2020-11-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Extract From <a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/">https://www.liaoxuefeng.com/</a></p>
<h1 id="git的配置"><a href="#git的配置" class="headerlink" title="git的配置"></a>git的配置</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line">$ git config --global user.email <span class="string">&quot;email@example.com&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="git仓库的初始化"><a href="#git仓库的初始化" class="headerlink" title="git仓库的初始化"></a>git仓库的初始化</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<h1 id="git-operation"><a href="#git-operation" class="headerlink" title="git operation"></a>git operation</h1><ul>
<li>git add readme.txt 添加 </li>
<li>git commit -m [message] 提交 </li>
<li>git status 查看状态 </li>
<li>git diff 查看修改 </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vi readme.txt</span><br><span class="line">$ git add readme.txt</span><br><span class="line">$ git commit -m <span class="string">&quot;add 3 files.&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="已提交的版本修改"><a href="#已提交的版本修改" class="headerlink" title="已提交的版本修改"></a>已提交的版本修改</h1><ul>
<li>git log [—pretty=oneline] 查看提交历史，以便确定要回退到哪个版本</li>
<li>git log —graph —pretty=oneline —abbrev-commit 树状图展示</li>
<li>git reset —hard [HEAD^|commit id] 版本退回 </li>
<li>git reflog 命令历史，以便确定要回到未来的哪个版本 </li>
</ul>
<p><strong>PS: 在Git中，用HEAD表示当前版本,上一个版本就是HEAD^，上上一个版本就是HEAD^^，当然往上100个版本写100个^比较容易数不过来，所以写成HEAD~100</strong></p>
<h1 id="工作区的退回"><a href="#工作区的退回" class="headerlink" title="工作区的退回"></a>工作区的退回</h1><p><strong>将工作区的内容退回到最后一次git commit或git add后的版本</strong></p>
<pre><code>一种是文件自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态
一种是文件已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态
</code></pre><ul>
<li>git restore <file></li>
<li>git checkout — <file></li>
</ul>
<h1 id="暂存区的退回"><a href="#暂存区的退回" class="headerlink" title="暂存区的退回"></a>暂存区的退回</h1><p><strong>将git add的内容退回到工作区</strong></p>
<ul>
<li>git restore —staged <file></li>
<li>git reset HEAD <file></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="版本库的删除"><a href="#版本库的删除" class="headerlink" title="版本库的删除"></a>版本库的删除</h1><ul>
<li>git rm <file> 将版本库中的文件删除</li>
<li>git commit 提交</li>
</ul>
<p><strong>工作区的a.txt删除了，可以使用git rm、git commit将文件从版本库删除；</strong></p>
<p><strong>若想恢复工作区的a.txt，可使用git restore将工作区的修改退回；</strong></p>
<p><strong>若已经使用git rm但没有提交，可使用git restore —staged <file>将暂存区的修改退回，再使用git restore将工作区的修改退回；</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ rm a.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">        deleted:    a.txt</span><br><span class="line"></span><br><span class="line">$ git rm a.txt</span><br><span class="line">rm <span class="string">&#x27;a.txt&#x27;</span></span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line">        deleted:    a.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="git推送"><a href="#git推送" class="headerlink" title="git推送"></a>git推送</h1><ul>
<li>git remote add <Reponame> <a target="_blank" rel="noopener" href="https://github.com/finyaci/learngit.git">https://github.com/finyaci/learngit.git</a> 加入远端仓库</li>
<li>git push -u <Reponame> master 第一次推送</li>
<li>git push <Reponame> master 之后推送</li>
<li>git pull <Reponame> master 从远程拉取仓库</li>
</ul>
<h1 id="git-remote-操作"><a href="#git-remote-操作" class="headerlink" title="git remote 操作"></a>git remote 操作</h1><ul>
<li>git remote -v 查看关联的远端仓库</li>
<li>git remote rm <Reponame> 删除远程库的名字</li>
</ul>
<h1 id="git分支操作"><a href="#git分支操作" class="headerlink" title="git分支操作"></a>git分支操作</h1><p>REF: <a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600/900003767775424">https://www.liaoxuefeng.com/wiki/896043488029600/900003767775424</a></p>
<ul>
<li>git branch 列出所有分支，当前分支前面会标一个*号。</li>
<li>git branch <Branchname> 创建一个分支</li>
<li>git [checkout|switch] <Branchname> 切换到指定分支</li>
<li>git switch -c <Branchname> 创建并切换到指定分支</li>
<li>git branch -d <Branchname> 删除指定分支</li>
<li>git merge <Branchname> 合并指定分支到当前分支<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git branch dec</span><br><span class="line"></span><br><span class="line">$ git branch</span><br><span class="line">  dec</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line">$ git checkout dec</span><br><span class="line">Switched to branch <span class="string">&#x27;dec&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h1><p>REF: <a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600/900388704535136">https://www.liaoxuefeng.com/wiki/896043488029600/900388704535136</a></p>
<ul>
<li>git stash 保存当前工作区内容</li>
<li>git stash list 查看保存列表</li>
<li>git stash pop 弹出工作区</li>
<li>git stash apply <StashIdx> 恢复指定工作区不删除</li>
<li>git cherry-pick <Commitid> 将指定的提交复制到当前分支</li>
</ul>
<h2 id="修改bug过程"><a href="#修改bug过程" class="headerlink" title="修改bug过程"></a>修改bug过程</h2><ul>
<li>master上有bug，而此时你正在dev分支上工作，修改bug</li>
</ul>
<ul>
<li>首先将工作区内容保存，其次从master创建分支issue-101修改bug，修改提交合并后，切换回dev分支，恢复工作区，并使用git cherry-pick命令将主分支上修改bug的内容也应用到dev分支上<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ git status	</span><br><span class="line">On branch dev</span><br><span class="line"></span><br><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state WIP on dev: f52c633 add merge</span><br><span class="line"></span><br><span class="line">$ git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">$ git checkout -b issue-101</span><br><span class="line">Switched to a new branch <span class="string">&#x27;issue-101&#x27;</span></span><br><span class="line">$ git add readme.txt </span><br><span class="line">$ git commit -m <span class="string">&quot;fix bug 101&quot;</span></span><br><span class="line">[issue-101 4c805e2] fix bug 101</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line"></span><br><span class="line">$ git switch master</span><br><span class="line">$ git merge --no-ff -m <span class="string">&quot;merged bug fix 101&quot;</span> issue-101</span><br><span class="line"></span><br><span class="line">$ git switch dev</span><br><span class="line">$ git stash pop</span><br><span class="line">On branch dev</span><br><span class="line"></span><br><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br><span class="line">$ git cherry-pick 4c805e2</span><br><span class="line">[master 1d4b803] fix bug 101</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/16/Digital%20Image%20Processing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/16/Digital%20Image%20Processing/" class="post-title-link" itemprop="url">Digital Image Processing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-16 19:51:05" itemprop="dateCreated datePublished" datetime="2020-09-16T19:51:05+08:00">2020-09-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-21 14:57:34" itemprop="dateModified" datetime="2020-09-21T14:57:34+08:00">2020-09-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="BMP图像格式"><a href="#BMP图像格式" class="headerlink" title="BMP图像格式"></a>BMP图像格式</h1><h2 id="BMP数据结构"><a href="#BMP数据结构" class="headerlink" title="BMP数据结构"></a>BMP数据结构</h2><p>BMP文件的数据按照从文件头开始的先后顺序分为四个部分：<br>◆ 位图文件头(bmp file header)：  提供文件的格式、大小等信息<br>◆ 位图信息头(bitmap information)：提供图像数据的尺寸、位平面数、压缩方式、颜色索引等信息<br>◆ 调色板(color palette)：可选，如使用索引来表示图像，调色板就是索引与其对应的颜色的映射表<br>◆ 位图数据(bitmap data)：图像数据区</p>
<h3 id="BMP文件头"><a href="#BMP文件头" class="headerlink" title="BMP文件头"></a>BMP文件头</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tagBITMAPFILEHEADER</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line">	UINT16 bfType;        <span class="comment">//2Bytes，必须为&quot;BM&quot;，即0x424D 才是Windows位图文件</span></span><br><span class="line">	DWORD bfSize;         <span class="comment">//4Bytes，整个BMP文件的大小</span></span><br><span class="line">	UINT16 bfReserved1;  <span class="comment">//2Bytes，保留，为0</span></span><br><span class="line">	UINT16 bfReserved2;  <span class="comment">//2Bytes，保留，为0</span></span><br><span class="line">	DWORD bfOffBits;     <span class="comment">//4Bytes，文件起始位置到图像像素数据的字节偏移量</span></span><br><span class="line">&#125; BITMAPFILEHEADER;</span><br></pre></td></tr></table></figure>
<h3 id="BMP信息头"><a href="#BMP信息头" class="headerlink" title="BMP信息头"></a>BMP信息头</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">tagBMP_INFOHEADER</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	DWORD  biSize;    <span class="comment">//4Bytes，INFOHEADER结构体大小，存在其他版本I NFOHEADER，用作区分</span></span><br><span class="line">	LONG   biWidth;    <span class="comment">//4Bytes，图像宽度（以像素为单位）</span></span><br><span class="line">	LONG   biHeight;    <span class="comment">//4Bytes，图像高度，+：图像存储顺序为Bottom2Top，-：Top2Bottom</span></span><br><span class="line">	WORD   biPlanes;    <span class="comment">//2Bytes，图像数据平面，BMP存储RGB数据，因此总为1</span></span><br><span class="line">	WORD   biBitCount;         <span class="comment">//2Bytes，图像像素位数</span></span><br><span class="line">	DWORD  biCompression;     <span class="comment">//4Bytes，0：不压缩，1：RLE8，2：RLE4</span></span><br><span class="line">	DWORD  biSizeImage;       <span class="comment">//4Bytes，4字节对齐的图像数据大小</span></span><br><span class="line">	LONG   biXPelsPerMeter;   <span class="comment">//4 Bytes，用象素/米表示的水平分辨率</span></span><br><span class="line">	LONG   biYPelsPerMeter;   <span class="comment">//4 Bytes，用象素/米表示的垂直分辨率</span></span><br><span class="line">	DWORD  biClrUsed;          <span class="comment">//4 Bytes，实际使用的调色板索引数，0：使用所有的调色板索引</span></span><br><span class="line">	DWORD biClrImportant;     <span class="comment">//4 Bytes，重要的调色板索引数，0：所有的调色板索引都重要</span></span><br><span class="line">&#125;BMP_INFOHEADER;</span><br></pre></td></tr></table></figure>
<h3 id="调色板"><a href="#调色板" class="headerlink" title="调色板"></a>调色板</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">tagRGBQUAD</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	BYTE  rgbBlue;       <span class="comment">//指定蓝色强度</span></span><br><span class="line">	BYTE  rgbGreen;      <span class="comment">//指定绿色强度</span></span><br><span class="line">	BYTE  rgbRed;        <span class="comment">//指定红色强度</span></span><br><span class="line">	BYTE  rgbReserved;  <span class="comment">//保留，设置为0</span></span><br><span class="line">&#125;RGBQUAD;</span><br></pre></td></tr></table></figure>
<h3 id="PS"><a href="#PS" class="headerlink" title="PS:"></a>PS:</h3><p>真彩色(24位图) 不需要调色板 1个像素需要三个字节表示(RGB各占一个字节)<br>位图 图像数据是调色板中的索引值<br>2色位图 1位即可表示(0-Black 1-White)一个字节表示8个像素<br>16色位图 4位表示1个像素，一个字节表示2个像素<br>256色位图 一个字节表示1个像素</p>
<h2 id="BMP数据存放顺序"><a href="#BMP数据存放顺序" class="headerlink" title="BMP数据存放顺序"></a>BMP数据存放顺序</h2><p>自下而上 从左至右</p>
<h2 id="反色-invert"><a href="#反色-invert" class="headerlink" title="反色(invert)"></a>反色(invert)</h2><p>反色：颜色量化级别是256则新图的RGB为255减去原图的RBG值，适用于真彩色，带调色板的彩色图和灰度图<br>真彩色：将反转的RGB重新写入<br>带调色板彩色图：将调色板反转</p>
<h1 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h1><h2 id="直方图性质"><a href="#直方图性质" class="headerlink" title="直方图性质"></a>直方图性质</h2><p>无空间信息<br>可叠加性<br>一对多 一个直方图可能对应多个图像</p>
<p>直方图分布越均匀，则图像愈发清晰</p>
<h2 id="直方图均衡化"><a href="#直方图均衡化" class="headerlink" title="直方图均衡化"></a>直方图均衡化</h2><p>目的：让一个图像的直方图均匀分布<br>A图直方图 r=p(r)<br>B图直方图 s=p(s)≡1<br>现在要将A图直方图均衡化，即让A图符合B图</p>
<p>策略：找到一个变换函数s=T(r)即可使A图均衡化<br>推导：在一定灰度等级内两图的灰度分别相等即可</p>
<p>$s=T(r)=1$</p>
<p>$\int^{r}_{0}{p(r)dr} = \int^{s}_{0}{p(s)ds} = \int^{s}_{0}{1·ds}=s=T(r)$</p>
<p>=&gt;</p>
<p>$T(r)=\int^{r}_{0}{rdr}$</p>
<h2 id="直方图规定化"><a href="#直方图规定化" class="headerlink" title="直方图规定化"></a>直方图规定化</h2><p>目的：让一个图像的直方图分布符合另一个指定图像的直方图<br>策略：A、B两图先分别均衡化，则A规定到B只要A均衡化在执行B的逆操作</p>
<p>A图均一化 $s=T(r)$ </p>
<p>B图均一化 $v=G(z) z=G^{-1}(v)$ </p>
<p>又 $s=v$ </p>
<p>=&gt;</p>
<p>$z=G^{-1}(T(r))$ </p>
<h1 id="灰度变换"><a href="#灰度变换" class="headerlink" title="灰度变换"></a>灰度变换</h1><p>f(x,y)-原来图像的点<br>g(x,y)-变换后图像的点</p>
<h2 id="线性变换"><a href="#线性变换" class="headerlink" title="线性变换"></a>线性变换</h2><h3 id="加常数"><a href="#加常数" class="headerlink" title="加常数"></a>加常数</h3><ul>
<li>$g(x,y)=f(x,y)±C$<br>压缩动态范围，图像对比度变低</li>
</ul>
<h3 id="图像反转"><a href="#图像反转" class="headerlink" title="图像反转"></a>图像反转</h3><ul>
<li>$g(x,y)=255-f(x,y)$</li>
</ul>
<h3 id="乘常数"><a href="#乘常数" class="headerlink" title="乘常数"></a>乘常数</h3><ul>
<li>$g(x,y)=Cf(x,y)$</li>
</ul>
<h2 id="分段线性变换"><a href="#分段线性变换" class="headerlink" title="分段线性变换"></a>分段线性变换</h2><h3 id="削波变换"><a href="#削波变换" class="headerlink" title="削波变换"></a>削波变换</h3><ul>
<li>扩展某一灰度区间的动态范围</li>
</ul>
<script type="math/tex; mode=display">
g(x,y) =
\begin{cases}
0,  & \text{if x < g1old} \\[2ex]
Cf(x,y), & \text{if g1old < x < g2old} \\[2ex]
255, & \text{if x > g2old}
\end{cases}</script><h3 id="阈值变换"><a href="#阈值变换" class="headerlink" title="阈值变换"></a>阈值变换</h3><ul>
<li>g1old = g2old</li>
<li>转换成黑白的二值图</li>
</ul>
<script type="math/tex; mode=display">
g(x,y) =
\begin{cases}
0,  & \text{if x < g1old} \\[2ex]
255, & \text{if x > g2old}
\end{cases}</script><h3 id="窗口变换"><a href="#窗口变换" class="headerlink" title="窗口变换"></a>窗口变换</h3><ul>
<li>将某一部分感兴趣的灰度区间和其他部分分离开来</li>
</ul>
<h4 id="清除背景的窗口变换"><a href="#清除背景的窗口变换" class="headerlink" title="清除背景的窗口变换"></a>清除背景的窗口变换</h4><script type="math/tex; mode=display">
g(x,y) =
\begin{cases}
0,  & \text{if x < g1old} \\[2ex]
255, & \text{if g1old < x < g2old} \\[2ex]
0, & \text{if x > g2old}
\end{cases}</script><h4 id="保留背景的窗口变换"><a href="#保留背景的窗口变换" class="headerlink" title="保留背景的窗口变换"></a>保留背景的窗口变换</h4><script type="math/tex; mode=display">
g(x,y) =
\begin{cases}
f(x,y),  & \text{if x < g1old} \\[2ex]
255, & \text{if g1old < x < g2old} \\[2ex]
f(x,y) & \text{if x > g2old}
\end{cases}</script><h2 id="非线性变换"><a href="#非线性变换" class="headerlink" title="非线性变换"></a>非线性变换</h2><h3 id="指数变换"><a href="#指数变换" class="headerlink" title="指数变换"></a>指数变换</h3><ul>
<li>低灰度区间扩展，高灰度区间压缩</li>
</ul>
<h3 id="对数变换"><a href="#对数变换" class="headerlink" title="对数变换"></a>对数变换</h3><ul>
<li>高灰度区间扩展，低灰度区间压缩</li>
</ul>
<h3 id="幂函数"><a href="#幂函数" class="headerlink" title="幂函数"></a>幂函数</h3><h3 id="查找表LUT"><a href="#查找表LUT" class="headerlink" title="查找表LUT"></a>查找表LUT</h3><ul>
<li>用户自定义</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/04/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">计算机组成原理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-26 12:37:22" itemprop="dateCreated datePublished" datetime="2020-04-26T12:37:22+08:00">2020-04-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-11 12:16:00" itemprop="dateModified" datetime="2020-05-11T12:16:00+08:00">2020-05-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="计算机系统的层次"><a href="#计算机系统的层次" class="headerlink" title="计算机系统的层次"></a>计算机系统的层次</h1><p>高级语言机器 软件层<br>汇编语言机器 软件层<br>操作系统机器 软件层</p>
<p>机器语言机器 硬件层<br>微指令系统    硬件层</p>
<h1 id="定点数"><a href="#定点数" class="headerlink" title="定点数"></a>定点数</h1><h1 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h1><h1 id="存储器"><a href="#存储器" class="headerlink" title="存储器"></a>存储器</h1><p>存储器：存储二进制信息<br>存储器的结构：MAR（地址存储器） MDR（数据存储器）存储体<br>cache-主存-辅存</p>
<h2 id="存取方式："><a href="#存取方式：" class="headerlink" title="存取方式："></a>存取方式：</h2><p>顺序存取：磁带 从前往后依次寻找<br>直接存取：磁盘 b+树 通过关键字找到数据大致范围，再在数据范围内找寻所要的数据<br>随机存取：（RAM ROM） 通过地址直接访问，耗时为电流延迟</p>
<h2 id="半导体随机存储器-易失性存储器"><a href="#半导体随机存储器-易失性存储器" class="headerlink" title="半导体随机存储器 易失性存储器"></a>半导体随机存储器 易失性存储器</h2><p>SRAM 静态随机存储器 使用触发器，不需要刷新，非破坏性读出，双稳态，运行快（不要刷新），功耗高，存储密度低，存储成本大<br>DRAM 动态随机存储器 使用电容，电荷会流失，充放电，破坏性读出，需要刷新，运行慢，功耗低，存储密度高，存储成本小</p>
<p>SRAM CACHE<br>DRAM 主存</p>
<p>DRAM刷新 2ms<br>主存采用行列式布局 可减少选通线<br>存取一个存储单元要行地址和列地址<br>刷新时，将一行单元读出再写入</p>
<p>分散刷新：每次读写都刷新 读写刷新读写刷新的机器周期<br>集中刷新：2ms内选择一段时间集中刷新，此时存储器将不可用，成为死区 64us用刷新1936us可正常使用<br>两者结合异步刷新：将刷新均匀的分散到2ms内</p>
<h2 id="只读存储器"><a href="#只读存储器" class="headerlink" title="只读存储器"></a>只读存储器</h2><p>作用：存放一些基本信息，告诉CPU RAM要调用哪些内容<br>ROM 可以和CPU直接通信，掉电不丢失 PS：硬盘需要经过IO才能和CPU通信</p>
<p>最初不可写，只能读，<br>PROM 可编程<br>EPROM 可擦除可编程 紫外线、电擦除<br>闪存 U盘<br>固态硬盘</p>
<h2 id="主存扩展"><a href="#主存扩展" class="headerlink" title="主存扩展"></a>主存扩展</h2><p>位扩 地址引脚共连<br>字扩展 通过片选选择，数据引脚共连</p>
<h1 id="寻址方式"><a href="#寻址方式" class="headerlink" title="寻址方式"></a>寻址方式</h1><p>立即寻址 0 操作数就在指令字中<br>直接寻址 1 指令字中存放操作数的地址<br>间接寻址 2 指令字中存放的是指向操作数的地址的地址<br>寄存器寻址 0 寄存器内存放的就是操作数<br>寄存器间接寻址 1 寄存器中存放的是操作数的地址<br>隐含寻址 0 有一个操作数在指令字中，另一个操作数在某些寄存器内，通过指令来区分另一个操作数所在的寄存器</p>
<p>偏移寻址<br>基址寻址 1 基址寄存器（BR）+指令中的地址<br>偏移寻址 1 变址寄存器（IX）+指令中的地址<br>相对寻址 1 程序计数器（PC）+指令中的地址</p>
<p>堆栈寻址</p>
<h1 id="CPU的5种功能"><a href="#CPU的5种功能" class="headerlink" title="CPU的5种功能"></a>CPU的5种功能</h1><ol>
<li>指令控制 取指令分析指令执行指令</li>
<li>操作控制 把各个操作送往相应的部件</li>
<li>时间控制 按时间发送指令</li>
<li>数据加工 算术运算逻辑运算</li>
<li>中断处理 处理一些中断请求和异常</li>
</ol>
<h1 id="指令周期"><a href="#指令周期" class="headerlink" title="指令周期"></a>指令周期</h1><p>指令周期：取出并执行一条指令的时间，通常包含若干机器周期<br>机器周期：指令周期包含多个机器周期（例如取指周期，执行周期，间址周期，中断周期）<br>时钟周期：CPU操作的基本单位</p>
<h2 id="指令执行方案"><a href="#指令执行方案" class="headerlink" title="指令执行方案"></a>指令执行方案</h2><ol>
<li>单指令周期 串行执行指令，所有指令都按相同的时间执行，所以指令周期为最长指令的时间</li>
<li>多指令周期 串行执行指令，时钟周期个数各不相同</li>
<li>流水线     并行执行，不同机器周期需要不同硬件</li>
</ol>
<h1 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h1><p>总线：可以实现信息分时共享的公共信息线路</p>
<h2 id="总线类型"><a href="#总线类型" class="headerlink" title="总线类型"></a>总线类型</h2><p>地址总线，控制总线，数据总线<br>数据传输格式：串行总线（成本低，空间小），并行总线（成本高，占空间）速度？ 总线带宽（单位时间传输的数据位数）=工作频率*总线宽度 频率高干扰强所以并行不一定比串行的快<br>连接的部件：片内总线（芯片内部），系统总线（CPU IO MEM间），通信外部总线（计算机之间的通信）<br>时序控制方式：同步总线，异步总线</p>
<h2 id="总线仲裁：多个设备同时请求一条总线时，选择一个设备使用总线"><a href="#总线仲裁：多个设备同时请求一条总线时，选择一个设备使用总线" class="headerlink" title="总线仲裁：多个设备同时请求一条总线时，选择一个设备使用总线"></a>总线仲裁：多个设备同时请求一条总线时，选择一个设备使用总线</h2><p>集中式 使用总线控制部件<br>链式查询方式（总线请求总线允许总线忙） 将总线允许信号依次传遍线路上的设备，靠近总线控制部件的设备优先获得总线控制权，并发出总线忙信号<br>计数器查询方式（设备地址总线请求总线忙） 总线控制部件中有计数器，计数器从零开始增加，和计数器相同的设备号通过设备地址立即获得总线控制权<br>独立请求 每个设备有单独的总线请求和总线允许线路</p>
<h2 id="总线传输的四个阶段"><a href="#总线传输的四个阶段" class="headerlink" title="总线传输的四个阶段"></a>总线传输的四个阶段</h2><p>请求阶段：主模块设备申请总线使用权，总线控制机构进行总线仲裁<br>寻址阶段：主模块向从模块发出命令，开启从模块<br>传输阶段：传输数据<br>结束阶段：删除有关信息让出总线使用权</p>
<h1 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h1><h2 id="主机访问IO方式"><a href="#主机访问IO方式" class="headerlink" title="主机访问IO方式"></a>主机访问IO方式</h2><p>程序查询方式 CPU在IO程序启动后就不断查询IO的状态，CPU要等待IO完成才能继续执行指令 IO与CPU串行工作<br>程序中断方式 IO启动时，不影响CPU工作，IO完成后向CPU提出中断请求，CPU将信息保存后执行IO操作，执行完毕后，恢复保存的信息继续执行之前的工作 CPU和IO大部分时间并行操作<br>DMA方式 IO完成后发出DMA请求，此时CPU不进行访存，总线控制权交由DMA，DMA将数据从IO设备写入内存，结束后控制权交给CPU使其继续执行</p>
<h2 id="IO接口的主要功能"><a href="#IO接口的主要功能" class="headerlink" title="IO接口的主要功能"></a>IO接口的主要功能</h2><p>设备选址<br>传送命令<br>传送数据<br>反应IO的工作状态</p>
<h2 id="IO编址方式"><a href="#IO编址方式" class="headerlink" title="IO编址方式"></a>IO编址方式</h2><p>统一编址：存储器映射方式 将IO端口映射到存储器中，对IO的操作就如同对内存的操作 优点：不需要IO命令，更大的地址空间 缺点：占用内存，速度慢<br>独立编址：IO映射方式 有独立的IO命令，操作IO设备使用IO命令即可 优点：不需要占用存储空间，编程时较清晰，速度快 缺点：有些外设要配有单独的指令，增加了控制的复杂性</p>
<p>8086独立编址</p>
<h2 id="IO接口的分类"><a href="#IO接口的分类" class="headerlink" title="IO接口的分类"></a>IO接口的分类</h2><p>数据传送方式：并口和串口<br>主机访问IO的控制方式：DMA接口 查询接口 中断接口<br>灵活性：可编程和不可编程接口</p>
<h1 id="中断"><a href="#中断" class="headerlink" title="中断"></a>中断</h1><p>中断：CPU暂停当前任务，进而去执行其他任务，例如IO中断，当执行完任务后，由返回原任务的过程</p>
<h2 id="中断分类"><a href="#中断分类" class="headerlink" title="中断分类"></a>中断分类</h2><p>内中断（与当前指令有关）：异常陷入<br>    自愿中断：访管指令<br>    强迫中断：<br>        硬件故障（缺页）<br>        软件中断（除0）<br>外中断（与当前指令无关）：<br>    IO外设请求<br>    人工干预（用户停止程序）<br>    可屏蔽中断：关中断也响应<br>    非屏蔽中断：关中断不响应</p>
<p>中断隐指令：关中断 保存断电 引出中断服务程序（硬件向量法-通过向量地址进入指定的中断程序）<br>中断服务程序：<br>    单重中断：保护现场 执行程序 恢复现场 开中断 中断返回<br>    多重中断：保护现场和屏蔽字 开中断 执行程序 关中断 恢复现场和屏蔽字 开中断 中断返回</p>
<h2 id="中断屏蔽技术"><a href="#中断屏蔽技术" class="headerlink" title="中断屏蔽技术"></a>中断屏蔽技术</h2><p>多重中断中 使用屏蔽字保证高级别的不会被低级别的中断</p>
<h1 id="DMA传输方式"><a href="#DMA传输方式" class="headerlink" title="DMA传输方式"></a>DMA传输方式</h1><p>主存和DMA之间有一条通路，主存和IO交换数据时，不通过CPU而是DMA交换数据 </p>
<ol>
<li>停止CPU访存</li>
<li>DMA与CPU交替访存 一个机器周期分为两个周期</li>
<li>周期挪用 DMA需要访存时CPU让出机器周期<br> CPU不访存 不冲突<br> CPU正在访存 CPU存取周期结束让出总线<br> CPU和DMA同时访存 DMA优先</li>
</ol>
<h1 id="中断和DMA的区别"><a href="#中断和DMA的区别" class="headerlink" title="中断和DMA的区别"></a>中断和DMA的区别</h1><pre><code>    中断         DMA
</code></pre><p>响应：指令执行周期结束后响应    每个机器周期结束均可响应<br>场景：低速设备        高速设备<br>优先级：低            高<br>处理异常：可处理异常        不可处理异常</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/04/25/DesignPattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/25/DesignPattern/" class="post-title-link" itemprop="url">Java设计模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-25 16:37:22" itemprop="dateCreated datePublished" datetime="2020-04-25T16:37:22+08:00">2020-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 16:39:03" itemprop="dateModified" datetime="2021-01-05T16:39:03+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="0-面向对象设计七大原则"><a href="#0-面向对象设计七大原则" class="headerlink" title="0 面向对象设计七大原则"></a>0 面向对象设计七大原则</h1><ul>
<li>开闭原则OCP：对扩展开放对修改关闭</li>
<li>单一职责原则：一个对象只包含单一职责</li>
<li>依赖倒转原则：细节依赖抽象，底层依赖高层，反之不行</li>
<li>接口隔离原则：客户端不应该依赖它不使用的接口</li>
<li>里氏代换原则：任何引用基类的地方都应该透明的使用其子类</li>
<li>迪米特法则：只和直接朋友通信（成员变量，返回值，函数的参数）最少知道原则</li>
<li>合成复用原则：尽量使用合成/聚合的方式，避免使用继承的方式</li>
</ul>
<h1 id="1-单例模式"><a href="#1-单例模式" class="headerlink" title="1 单例模式"></a>1 单例模式</h1><ul>
<li>单例设计模式，就是采取一定的方法保证在整个的软件系统中，对某个类只能存在一个对象实例，并且该类只提供一个取得其对象实例的方法(静态方法)</li>
<li>使用场景<ul>
<li>1) 单例模式保证了 系统内存中该类只存在一个对象，节省了系统资源，对于一些需要频繁创建销毁的对象，使用单例模式可以提高系统性能</li>
<li>2) 当想实例化一个单例类的时候，必须要记住使用相应的获取对象的方法，而不是使用new</li>
<li>3) 单例模式使用的场景：需要频繁的进行创建和销毁的对象、创建对象时耗时过多或耗费资源过多(即：重量级对象)，但又经常用到的对象、工具类对象、频繁访问数据库或文件的对象(比如数据源、 session工厂等)</li>
</ul>
</li>
</ul>
<h2 id="饿汉式"><a href="#饿汉式" class="headerlink" title="饿汉式"></a>饿汉式</h2><p>优缺点说明：<br>1) 优点：这种写法比较简单，就是在类装载的时候就完成实例化。避免了线程同步问题，是<font color="red">线程安全</font>的。<br>2) 缺点：在类装载的时候就完成实例化，没有达到Lazy Loading的效果。如果从始至终从未使用过这个实例，则会造成内存的浪费<br>3) 这种方式基于classloder机制避免了多线程的同步问题，不过， instance在类装载时就实例化，在单例模式中大多数都是调用getInstance方法， 但是导致类装载的原因有很多种，因此不能确定有其他的方式（或者其他的静态方法）导致类装载，这时候初始化instance就没有达到lazy loading的效果<br>4) 结论：这种单例模式可用，可能造成内存浪费</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//饿汉式(静态变量)</span></span><br><span class="line"><span class="comment">//为什么是静态的，因为单例模式私有了构造方法，无法创建对象，所以只能使用静态方法去获取实例，所以实例变量也应该是静态的</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EagerSingleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.私有构造方法</span></span><br><span class="line">    <span class="comment">// 2.本类内部私有实例变量</span></span><br><span class="line">    <span class="comment">// 3.提供实例的返回方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">EagerSingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> EagerSingleton instance = <span class="keyword">new</span> EagerSingleton();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> EagerSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//饿汉式(静态代码块)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BSEagerSingleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.私有构造方法</span></span><br><span class="line">    <span class="comment">// 2.本类内部私有实例变量，只声明不创建</span></span><br><span class="line">    <span class="comment">// 3.静态代码块中初始化实例变量</span></span><br><span class="line">    <span class="comment">// 4.提供实例的返回方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">BSEagerSingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> BSEagerSingleton instance;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        instance = <span class="keyword">new</span> BSEagerSingleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BSEagerSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="懒汉式"><a href="#懒汉式" class="headerlink" title="懒汉式"></a>懒汉式</h2><p>优缺点说明：<br>1) 解决了线程不安全问题<br>2) 效率太低了，每个线程在想获得类的实例时候，执行getInstance()方法都要进行同步。而其实这个方法只执行一次实例化代码就够了，后面的想获得该类实例，直接return就行了。方法进行同步效率太低<br>3) 结论：在实际开发中，不推荐使用这种方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//懒汉式(线程安全)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance==<span class="keyword">null</span>)</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="双重检查"><a href="#双重检查" class="headerlink" title="双重检查"></a>双重检查</h2><p>既线程安全，延时加载，又不用每一次都同步，效率高<br>优缺点说明：<br>1) Double-Check概念是多线程开发中常使用到的， 如代码中所示，我们进行了两<br>次if (singleton == null)检查，这样就可以保证线程安全了。<br>2) 这样，实例化代码只用执行一次，后面再次访问时，判断if (singleton == null)，<br>直接return实例化对象，也避免的反复进行方法同步.<br>3) 线程安全；延迟加载；效率较高<br>4) 结论：在实际开发中，推荐使用这种单例设计模式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleCheckSingleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">DoubleCheckSingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> DoubleCheckSingleton instance;  <span class="comment">// volatile保证在第一次实例化后同步代码块外面的线程也能看到更改的值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DoubleCheckSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>)   <span class="comment">// 针对之后每一次访问作出的检查-如果已经实例化则直接返回，不用同步，提高效率</span></span><br><span class="line">            <span class="keyword">synchronized</span> (DoubleCheckSingleton.class) &#123; <span class="comment">// 针对第一次访问，尚未实例化的情况，可以达到Lazy Loading的效果</span></span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> DoubleCheckSingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>PS:volatile保证了不同线程对这个变量进行读取时的可见性， 即一个线程修改了某个变量的值， 这新值对其他线程来说是立即可见的</p>
<h2 id="静态内部类双重检查"><a href="#静态内部类双重检查" class="headerlink" title="静态内部类双重检查"></a>静态内部类双重检查</h2><p>1) 这种方式采用了类装载的机制来保证初始化实例时只有一个线程。<br>2) 静态内部类方式在Singleton类被装载时并不会立即实例化，而是在需要实例化时，调用getInstance方法，才会装载SingletonInstance类，从而完成Singleton的实例化。<br>3) 类的静态属性只会在第一次加载类的时候初始化，所以在这里， JVM帮助我们保证了线程的安全性，在类进行初始化时，别的线程是无法进入的。<br>4) 优点：避免了线程不安全，利用静态内部类特点实现延迟加载，效率高</p>
<ul>
<li>静态内部类的特点：<ul>
<li>外部类装载时内部类不装载 - 延迟加载</li>
<li>线程安全</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StaticInnerClassSingleton</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">StaticInnerClassSingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonInstance</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> StaticInnerClassSingleton INSTANCE = <span class="keyword">new</span> StaticInnerClassSingleton();</span><br><span class="line">    &#125;   <span class="comment">//在内部类中实例化外部类实例</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StaticInnerClassSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonInstance.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="枚举单例"><a href="#枚举单例" class="headerlink" title="枚举单例"></a>枚举单例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">EnumSingleton</span></span>&#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2-工厂模式"><a href="#2-工厂模式" class="headerlink" title="2 工厂模式"></a>2 工厂模式</h1><h2 id="简单工厂模式-静态工厂模式"><a href="#简单工厂模式-静态工厂模式" class="headerlink" title="简单工厂模式 - 静态工厂模式"></a>简单工厂模式 - 静态工厂模式</h2><ul>
<li>工厂类负责实例化某一产品类的实例</li>
<li>优点：<ul>
<li>对象使用和创建分离，通过传入具体产品类名称，由工厂类去实例化，不用关心它是如何创建的</li>
<li>客户端无须知道所创建的具体产品类的类名，只需要知道具体产品类所对应的参数即可，对于一些复杂的类名，通过简单工厂模式可以减少使用者的记忆量</li>
<li>通过引入配置文件，可以在不修改任何客户端代码的情况下更换和增加新的具体产品类，在一定程度上提高了系统的灵活性</li>
<li>工厂类含有必要的判断逻辑，可以决定在什么时候创建哪一个产品类的实例，客户端可以免除直接创建产品对象的责任，而仅仅“消费”产品<br>缺点：当新增产品类的时候，需要修改工厂类，违反OCP原则</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;Please input the type of product:&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sc.next();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Product product = SimpleFactory.createProduct(getType());   <span class="comment">// 优点：对象使用和创建分离 通过传入具体产品类名称，由工厂类去实例化</span></span><br><span class="line">        <span class="keyword">if</span> (product != <span class="keyword">null</span>) &#123;</span><br><span class="line">            product.print();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;        <span class="comment">// 产品抽象类 供子类继承</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m B&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m A&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleFactory</span> </span>&#123;       <span class="comment">// 工厂类负责实例化某一产品类的实例</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Product <span class="title">createProduct</span><span class="params">(String type)</span> </span>&#123;  <span class="comment">// 一般设置为静态 使用类名.方法名调用（就可不用实例化SimpleFactory）</span></span><br><span class="line">        <span class="keyword">if</span> (type.equals(<span class="string">&quot;A&quot;</span>))       <span class="comment">// 缺点：当新增产品类的时候，需要修改工厂类，违反OCP原则</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ProductA();</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;B&quot;</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ProductB();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Please input the type of product:A</span></span><br><span class="line"><span class="comment">I&#x27;m A</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h2><ul>
<li>建立抽象工厂类，定义抽象实例化方法，供不同工厂继承，对象实例化延迟到工厂子类中<br>优点：符合OCP<br>缺点：当产品种类非常多时，会出现大量的与之对应的工厂对象<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryPattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        XiaoMiFac xiaomiFac = <span class="keyword">new</span> XiaoMiFac();</span><br><span class="line">        Phone p1 = xiaomiFac.creatPhone();</span><br><span class="line">        p1.call();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Phone</span> </span>&#123;		<span class="comment">// 抽象产品类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoMiPhone</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Are you OK?&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuaWeiPhone</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;251&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">PhoneFactory</span> </span>&#123;	<span class="comment">// 抽象工厂类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Phone <span class="title">creatPhone</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoMiFac</span> <span class="keyword">implements</span> <span class="title">PhoneFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Phone <span class="title">creatPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> XiaoMiPhone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuaWeiFac</span> <span class="keyword">implements</span> <span class="title">PhoneFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Phone <span class="title">creatPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HuaWeiPhone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h2><ul>
<li>工厂方法模式中的工厂只生产某一类产品，抽象工厂模式中还可以生产其它大类的产品；工厂与产品现在不是一对一的情形<br>缺点：当新增产品体系时要修改工厂类，违反OCP<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbsFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> FactoryCN().createCalc().print();</span><br><span class="line">        <span class="keyword">new</span> FactoryJP().createCalc().print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">PC</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Calculator</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Factories</span></span>&#123;</span><br><span class="line">    <span class="function">Calculator <span class="title">createCalc</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">PC <span class="title">createPC</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LENOVO</span> <span class="keyword">implements</span> <span class="title">PC</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m LENOVO&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TOSHIBA</span> <span class="keyword">implements</span> <span class="title">PC</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m TOSHIBA&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CASIO</span> <span class="keyword">implements</span> <span class="title">Calculator</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m CASIO&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DELI</span> <span class="keyword">implements</span> <span class="title">Calculator</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I&#x27;m DELI&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FactoryJP</span> <span class="keyword">implements</span> <span class="title">Factories</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Calculator <span class="title">createCalc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CASIO();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PC <span class="title">createPC</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TOSHIBA();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FactoryCN</span> <span class="keyword">implements</span> <span class="title">Factories</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Calculator <span class="title">createCalc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DELI();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PC <span class="title">createPC</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LENOVO();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>PS：工厂方法模式和抽象工厂模式的区别</p>
<h1 id="3-原型模式"><a href="#3-原型模式" class="headerlink" title="3 原型模式"></a>3 原型模式</h1><ul>
<li>设定一个原型，对于一个对象复制多份的情况下，可以直接通过对象调用.clone()方法实现对象的复制</li>
<li>克隆对引用数据类型只作浅拷贝<br>优点：一般方法是new多次，但如果对象要增删属性，则只需对原型作修改即可</li>
</ul>
<h2 id="使用Cloneable接口实现深拷贝"><a href="#使用Cloneable接口实现深拷贝" class="headerlink" title="使用Cloneable接口实现深拷贝"></a>使用Cloneable接口实现深拷贝</h2><p>缺点：如果被拷贝对象引用数据类型较多，则需对每一个引用数据类型单独进行深拷贝<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Prototype</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        Sheep s1 = <span class="keyword">new</span> Sheep(<span class="string">&quot;Alice&quot;</span>, <span class="keyword">new</span> Wolf());</span><br><span class="line">        Sheep s2 = (Sheep) s1.clone();</span><br><span class="line">        Sheep s3 = (Sheep) s1.clone();</span><br><span class="line"></span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        System.out.println(s3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wolf</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.clone();   <span class="comment">// 默认clone()调用方式，只对基本数据类型拷贝</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sheep</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> Wolf enemy;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Sheep&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, enemy=&quot;</span> + enemy +</span><br><span class="line">                <span class="string">&quot;, enemy.hashCode=&quot;</span> +</span><br><span class="line">                enemy.hashCode() + <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Sheep</span><span class="params">(String name, Wolf enemy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.enemy = enemy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        Object obj = <span class="keyword">null</span>;</span><br><span class="line">        obj = <span class="keyword">super</span>.clone();    <span class="comment">// 对象调用clone()方法，则会调用Object中的clone()方法</span></span><br><span class="line">        Sheep sheep = (Sheep) obj;  <span class="comment">// 完成对基本数据类型的深拷贝</span></span><br><span class="line">        sheep.enemy = (Wolf) enemy.clone(); <span class="comment">// 对于引用数据类型，则对其单独拷贝</span></span><br><span class="line">        <span class="keyword">return</span> sheep;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Sheep&#123;name=&#x27;Alice&#x27;, enemy=com.java.designpattern.Wolf@b4c966a, enemy.hashCode=189568618&#125;</span></span><br><span class="line"><span class="comment">Sheep&#123;name=&#x27;Alice&#x27;, enemy=com.java.designpattern.Wolf@1e80bfe8, enemy.hashCode=511754216&#125;</span></span><br><span class="line"><span class="comment">Sheep&#123;name=&#x27;Alice&#x27;, enemy=com.java.designpattern.Wolf@66a29884, enemy.hashCode=1721931908&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h2 id="对象序列化实现clone的深拷贝"><a href="#对象序列化实现clone的深拷贝" class="headerlink" title="对象序列化实现clone的深拷贝"></a>对象序列化实现clone的深拷贝</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TODO</span></span><br></pre></td></tr></table></figure>
<h1 id="4-建造者模式（生成器模式）"><a href="#4-建造者模式（生成器模式）" class="headerlink" title="4 建造者模式（生成器模式）"></a>4 建造者模式（生成器模式）</h1><h2 id="Situation1"><a href="#Situation1" class="headerlink" title="Situation1"></a>Situation1</h2><p>建造者模式的四个角色<br>1) Product（产品角色）： 一个具体的产品对象。<br>2) Builder（抽象建造者）： 创建一个Product对象的各个部件指定的 接口/抽象类。<br>3) ConcreteBuilder（具体建造者）： 实现接口，构建和装配各个部件。<br>4) Director（指挥者）： 构建一个使用Builder接口的对象。它主要是用于创建一个复杂的对象。它主要有两个作用，一是：隔离了客户与对象的生产过程，二是：负责控制产品对象的生产过程。</p>
<p>建造者模式的注意事项和细节<br>1) 客户端(使用程序)不必知道产品内部组成的细节，将产品本身(House)与产品的创建过程解耦，使得相同的创建过程可以创建不同的产品对象<br>2) 每一个具体建造者都相对独立，而与其他的具体建造者无关，因此可以很方便地替换具体建造者或增加新的具体建造者，用户使用不同的具体建造者即可得到不同的产品对象<br>3) 可以更加精细地控制产品的创建过程 。将复杂产品的创建步骤分解在不同的方法中，使得创建过程更加清晰，也更方便使用程序来控制创建过程<br>4) 增加新的具体建造者无须修改原有类库的代码，指挥者类针对抽象建造者类编程，系统扩展方便，符合 “开闭原则” 建造者模式的注意事项和细节<br>5) 建造者模式所创建的产品一般具有较多的共同点，其组成部分相似，如果产品之间的差异性很大，则不适合使用建造者模式，因此其使用范围受到一定的限制。<br>6) 如果产品的内部变化复杂，可能会导致需要定义很多具体建造者类来实现这种变化，导致系统变得很庞大， 因此在这种情况下，要考虑是否选择建造者模式.<br>7) 抽象工厂模式VS建造者模式抽象工厂模式实现对产品家族的创建，一个产品家族是这样的一系列产品：具有不同分类维度的产品组合，采用抽象工厂模式不需要关心构建过程，只关心什么产品由什么工厂生产即可。而建造者模式则是要求按照指定的蓝图建造产品，它的主要目的是通过组装零配件而产生一个新产品</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstructorPattern</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Director director = <span class="keyword">new</span> Director(<span class="keyword">new</span> CommonHouse());</span><br><span class="line">        System.out.println(director.constructHouse());</span><br><span class="line">        director.setHouseBuilder(<span class="keyword">new</span> ExpensiveHouse());</span><br><span class="line">        System.out.println(director.constructHouse());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HouseBuilder</span></span>&#123;    <span class="comment">// 抽象建造类</span></span><br><span class="line">    <span class="keyword">protected</span> House house = <span class="keyword">new</span> House();</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildFoundation</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildRoof</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> House <span class="title">buildHouse</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> house;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">House</span></span>&#123;&#125;   <span class="comment">//产品</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonHouse</span> <span class="keyword">extends</span> <span class="title">HouseBuilder</span></span>&#123; <span class="comment">//具体建造类</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildFoundation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Build CommonHouse Foundation&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildRoof</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Build CommonHouse Roof&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExpensiveHouse</span> <span class="keyword">extends</span> <span class="title">HouseBuilder</span></span>&#123; <span class="comment">//具体建造类</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildFoundation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Build ExpensiveHouse Foundation&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildRoof</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Build ExpensiveHouse Roof&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Director</span></span>&#123; <span class="comment">// 指挥者 Director 它用于指导具体构建者如何构建产品，控制调用先后次序，并向调用者返回完整的产品类</span></span><br><span class="line">    <span class="keyword">private</span> HouseBuilder houseBuilder;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHouseBuilder</span><span class="params">(HouseBuilder houseBuilder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.houseBuilder = houseBuilder;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Director</span><span class="params">(HouseBuilder houseBuilder)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.houseBuilder = houseBuilder;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> House <span class="title">constructHouse</span><span class="params">()</span></span>&#123;  <span class="comment">// 控制调用先后次序，并向调用者返回完整的产品类</span></span><br><span class="line">        houseBuilder.buildRoof();</span><br><span class="line">        houseBuilder.buildFoundation();</span><br><span class="line">        <span class="keyword">return</span> houseBuilder.buildHouse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Situation2"><a href="#Situation2" class="headerlink" title="Situation2"></a>Situation2</h2><ul>
<li>当一个类构造器需要传入很多参数时，如果创建这个类的实例，代码可读性会非常差，而且很容易引入错误，此时就可以利用 builder模式进行重构<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重构前</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Computer</span> </span>&#123; </span><br><span class="line">    <span class="keyword">private</span> String cpu; </span><br><span class="line">    <span class="keyword">private</span> String screen; </span><br><span class="line">    <span class="keyword">private</span> String memory; </span><br><span class="line">    <span class="keyword">private</span> String mainboard; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Computer</span><span class="params">(String cpu, String screen, String memory, String mainboard)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">this</span>.cpu = cpu; </span><br><span class="line">        <span class="keyword">this</span>.screen = screen; </span><br><span class="line">        <span class="keyword">this</span>.memory = memory; </span><br><span class="line">        <span class="keyword">this</span>.mainboard = mainboard; </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 重构后</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewComputer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String cpu;</span><br><span class="line">    <span class="keyword">private</span> String screen;</span><br><span class="line">    <span class="keyword">private</span> String memory;</span><br><span class="line">    <span class="keyword">private</span> String mainboard;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NewComputer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;can’t init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">NewComputer</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">        cpu = builder.cpu;</span><br><span class="line">        screen = builder.screen;</span><br><span class="line">        memory = builder.memory;</span><br><span class="line">        mainboard = builder.mainboard;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String cpu;</span><br><span class="line">        <span class="keyword">private</span> String screen;</span><br><span class="line">        <span class="keyword">private</span> String memory;</span><br><span class="line">        <span class="keyword">private</span> String mainboard;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">cpu</span><span class="params">(String val)</span> </span>&#123;</span><br><span class="line">            cpu = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">screen</span><span class="params">(String val)</span> </span>&#123;</span><br><span class="line">            screen = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">memory</span><span class="params">(String val)</span> </span>&#123;</span><br><span class="line">            memory = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">mainboard</span><span class="params">(String val)</span> </span>&#123;</span><br><span class="line">            mainboard = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> NewComputer <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> NewComputer(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Click</span> </span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </span><br><span class="line">        <span class="comment">// 非 Builder 模式 </span></span><br><span class="line">        Computer computer = <span class="keyword">new</span> Computer(<span class="string">&quot;cpu&quot;</span>, <span class="string">&quot;screen&quot;</span>, <span class="string">&quot;memory&quot;</span>, <span class="string">&quot;mainboard&quot;</span>); </span><br><span class="line">        <span class="comment">// Builder 模式 </span></span><br><span class="line">        NewComputer newComputer = <span class="keyword">new</span> NewComputer.Builder()</span><br><span class="line">        .cpu(<span class="string">&quot;cpu&quot;</span>) </span><br><span class="line">        .screen(<span class="string">&quot;screen&quot;</span>) </span><br><span class="line">        .memory(<span class="string">&quot;memory&quot;</span>) </span><br><span class="line">        .mainboard(<span class="string">&quot;mainboard&quot;</span>) </span><br><span class="line">        .build(); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="5-适配器模式"><a href="#5-适配器模式" class="headerlink" title="5 适配器模式"></a>5 适配器模式</h1><ul>
<li>适配器模式将某个类的接口转换成客户端期望的另一个接口表示，主的目的是兼容性，让原本因接口不匹配不能一起工作的两个类可以协同工作</li>
</ul>
<h2 id="类适配器模式"><a href="#类适配器模式" class="headerlink" title="类适配器模式"></a>类适配器模式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassAdaptor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Phones phone1 = <span class="keyword">new</span> Phones();</span><br><span class="line">        phone1.charging(<span class="keyword">new</span> ChargingAdaptor());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Voltage220V</span> </span>&#123;         <span class="comment">// 被适配的类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">output220V</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> voltage = <span class="number">220</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;Activate Voltage &quot;</span> + voltage + <span class="string">&quot;V&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> voltage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IVoltage5V</span> </span>&#123;      <span class="comment">// 要进行适配目标的方法写在接口中</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">output5V</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChargingAdaptor</span> <span class="keyword">extends</span> <span class="title">Voltage220V</span> <span class="keyword">implements</span> <span class="title">IVoltage5V</span> </span>&#123;   <span class="comment">// 适配器类 继承被适配的类 实现要适配的接口</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">output5V</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newVoltage;</span><br><span class="line">        newVoltage = <span class="keyword">this</span>.output220V() / <span class="number">44</span>;</span><br><span class="line">        <span class="keyword">return</span> newVoltage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phones</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charging</span><span class="params">(ChargingAdaptor adaptor)</span> </span>&#123; <span class="comment">// 传入适配器对象进行调用 对被适配的类</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Charging... the voltage is &quot;</span> + adaptor.output5V() + <span class="string">&quot;V&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="对象适配器模式"><a href="#对象适配器模式" class="headerlink" title="对象适配器模式"></a>对象适配器模式</h2><ul>
<li>适配器类不是继承被适配类 而是直接持有类对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectAdaptor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Phones phone1 = <span class="keyword">new</span> Phones();</span><br><span class="line">        phone1.charging(<span class="keyword">new</span> ChargingAdaptor(<span class="keyword">new</span> Voltage220V()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Voltage220V</span> </span>&#123;         <span class="comment">// 被适配的类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">output220V</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> voltage = <span class="number">220</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;Activate Voltage &quot;</span> + voltage + <span class="string">&quot;V&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> voltage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IVoltage5V</span> </span>&#123;      <span class="comment">// 要进行适配目标的方法写在接口中</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">output5V</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChargingAdaptor</span> <span class="keyword">implements</span> <span class="title">IVoltage5V</span> </span>&#123;   <span class="comment">// 适配器类 继承被适配的类</span></span><br><span class="line">    <span class="keyword">private</span> Voltage220V voltage220V;    <span class="comment">// 适配器类不是继承被适配类 而是直接持有类对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChargingAdaptor</span><span class="params">(Voltage220V voltage220V)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.voltage220V = voltage220V;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">output5V</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> newVoltage;</span><br><span class="line">        newVoltage = voltage220V.output220V() / <span class="number">44</span>;</span><br><span class="line">        <span class="keyword">return</span> newVoltage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phones</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charging</span><span class="params">(ChargingAdaptor adaptor)</span> </span>&#123; <span class="comment">// 传入适配器对象进行调用 对被适配的类</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Charging... the voltage is &quot;</span> + adaptor.output5V() + <span class="string">&quot;V&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="接口适配器模式"><a href="#接口适配器模式" class="headerlink" title="接口适配器模式"></a>接口适配器模式</h2><p>1) 一些书籍称为：适配器模式(Default Adapter Pattern)或缺省适配器模式。<br>2) 当不需要全部实现接口提供的方法时，可先设计一个抽象类实现接口，并为该接口中每个方法提供一个默认实现（空方法），那么该抽象类的子类可有选择地覆盖父类的某些方法来实现需求<br>3) 适用于一个接口不想使用其所有的方法的情况。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* IAdaptor.java */</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.InterfacePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAdaptor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* AbsAdaptor.java */</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.InterfacePattern;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设计一个抽象类实现接口，并为该接口中每个方法提供一个默认实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbsAdaptor</span> <span class="keyword">implements</span> <span class="title">IAdaptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* AdaptorClassOne.java */</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.InterfacePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdaptorClassOne</span> <span class="keyword">extends</span> <span class="title">AbsAdaptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;in AdaptorClassOne fun1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Client.java */</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.InterfacePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> AdaptorClassOne().fun1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="6-桥接模式"><a href="#6-桥接模式" class="headerlink" title="6 桥接模式"></a>6 桥接模式</h1><ul>
<li>Abstraction - 抽象类持有实现类接口对象，充当桥接类</li>
<li>Implementor - 行为实现类接口</li>
<li>ConcreteImplementor - 具体实现类</li>
<li>RefinedAbstraction - 抽象类的子类</li>
</ul>
<p>优点：满⾜了单一职责和开闭原则</p>
<p>情形：<br>    两类商品，两种不同的销售方式<br>    两种巧克力通过两种不同的方式销售<br>    Chocolate充当Abstraction<br>    SalesFunction充当Implementor</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.BridgePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Chocolate c1 = <span class="keyword">new</span> Dove(<span class="string">&quot;dove1&quot;</span>,<span class="number">20</span>,<span class="keyword">new</span> SellByNetwork());</span><br><span class="line">        Chocolate c2 = <span class="keyword">new</span> Dove(<span class="string">&quot;hershey1&quot;</span>,<span class="number">30</span>,<span class="keyword">new</span> SellByNetwork());</span><br><span class="line"></span><br><span class="line">        c1.sell();</span><br><span class="line">        c2.sell();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Chocolate.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.BridgePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Chocolate</span> </span>&#123;</span><br><span class="line">    SalesFunction salesFunction;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Chocolate</span><span class="params">(String name, <span class="keyword">float</span> price, SalesFunction salesFunction)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.salesFunction = salesFunction;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Dove.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.BridgePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dove</span> <span class="keyword">extends</span> <span class="title">Chocolate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dove</span><span class="params">(String name, <span class="keyword">float</span> price, SalesFunction salesFunction)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, price, salesFunction);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.print(<span class="keyword">this</span>.getName()+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        salesFunction.sell();</span><br><span class="line">        System.out.println(<span class="string">&quot; &quot;</span>+ <span class="keyword">this</span>.getPrice()+<span class="string">&quot;$ cost&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Hershey.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.BridgePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hershey</span> <span class="keyword">extends</span> <span class="title">Chocolate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hershey</span><span class="params">(String name, <span class="keyword">float</span> price, SalesFunction salesFunction)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, price, salesFunction);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="keyword">this</span>.getName()+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        salesFunction.sell();</span><br><span class="line">        System.out.println(<span class="string">&quot; &quot;</span>+ <span class="keyword">this</span>.getPrice()+<span class="string">&quot;$ cost&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// SalesFunction.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.BridgePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SalesFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// SellByNetwork.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.BridgePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellByNetwork</span> <span class="keyword">implements</span> <span class="title">SalesFunction</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;sell by network&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// SellByShop.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.BridgePattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellByShop</span> <span class="keyword">implements</span> <span class="title">SalesFunction</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;sell by shop&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">dove1 sell by network 20.0$ cost</span></span><br><span class="line"><span class="comment">hershey1 sell by network 30.0$ cost</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="7-装饰器模式"><a href="#7-装饰器模式" class="headerlink" title="7 装饰器模式"></a>7 装饰器模式</h1><ul>
<li><p>动态的将新功能附加到对象上。在对象功能扩展方面，它比继承更有弹性，装饰器模式也体现了开闭原则(ocp)</p>
</li>
<li><p>组成：</p>
<ul>
<li>Component 被装饰类</li>
<li>ConcreteComponent 被装饰类子类</li>
<li>Decorator 装饰类</li>
<li>ConcreteComponent 具体装饰类</li>
</ul>
</li>
<li>装饰类通过构造方法持有被装饰类子类的对象，即可在装饰类中扩展被装饰类对象的功能</li>
</ul>
<p>PS：继承机制和关联机制的区别</p>
<pre><code>* 使用继承机制(生成子类继承) 必须生成子类，在类层级进行扩展 静态的
* 使用关联机制(装饰器类持有被装饰类的对象) 获取对象即可进行扩展 动态的
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.java.designpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecoratorPattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SecondGenRobot robot = <span class="keyword">new</span> SecondGenRobot(<span class="keyword">new</span> FirstGenRobot());</span><br><span class="line">        robot.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Robot</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstGenRobot</span> <span class="keyword">implements</span> <span class="title">Robot</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;This is func 1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SecondGenRobot</span> <span class="keyword">implements</span> <span class="title">Robot</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> FirstGenRobot firstGenRobot;    <span class="comment">// 持有被装饰对象</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SecondGenRobot</span><span class="params">(FirstGenRobot firstGenRobot)</span> </span>&#123; <span class="comment">// 通过构造方法获取被装饰对象</span></span><br><span class="line">        <span class="keyword">this</span>.firstGenRobot = firstGenRobot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        firstGenRobot.doSomething();</span><br><span class="line">        System.out.println(<span class="string">&quot;This is func 2&quot;</span>);   <span class="comment">// 动态扩展原有功能，符合OCP</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="8-组合模式"><a href="#8-组合模式" class="headerlink" title="8 组合模式"></a>8 组合模式</h1><ul>
<li>Component 定义要实现的方法</li>
<li>Composite 容器 用于管理叶子节点 可以包含叶子节点也可以包含容器 将工作委派给叶子节点</li>
<li>Leaf    叶子节点 完成实际工作</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Component.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.compositepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ComponentCounter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// LeafCity.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.compositepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LeafCity</span> <span class="keyword">implements</span> <span class="title">ComponentCounter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LeafCity</span><span class="params">(String name, <span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CompositeCounter.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.compositepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Composite</span> <span class="keyword">implements</span> <span class="title">ComponentCounter</span> </span>&#123;    <span class="comment">//容器类，用于管理叶子节点</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;ComponentCounter&gt; counterList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(ComponentCounter counter)</span> </span>&#123; <span class="comment">// 增加管理的子节点</span></span><br><span class="line">        counterList.add(counter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(ComponentCounter counter)</span> </span>&#123;  <span class="comment">// 删除子节点</span></span><br><span class="line">        counterList.remove(counter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;ComponentCounter&gt; <span class="title">getChild</span><span class="params">()</span> </span>&#123;   <span class="comment">// 获取该容器所管理的子节点列表</span></span><br><span class="line">        <span class="keyword">return</span> counterList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (ComponentCounter counter : counterList) &#123;</span><br><span class="line">            sum += counter.count();     <span class="comment">// 如果子节点是一个容器，那么子节点将会递归调用count()方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.compositepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Composite JiangSu = <span class="keyword">new</span> Composite();</span><br><span class="line">        JiangSu.add(<span class="keyword">new</span> LeafCity(<span class="string">&quot;city1&quot;</span>,<span class="number">600000</span>));</span><br><span class="line">        JiangSu.add(<span class="keyword">new</span> LeafCity(<span class="string">&quot;city2&quot;</span>,<span class="number">1600000</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;Num in Jiangsu:&quot;</span>+JiangSu.count());</span><br><span class="line"></span><br><span class="line">        Composite AnHui = <span class="keyword">new</span> Composite();</span><br><span class="line">        AnHui.add(<span class="keyword">new</span> LeafCity(<span class="string">&quot;city3&quot;</span>,<span class="number">400000</span>));</span><br><span class="line">        AnHui.add(<span class="keyword">new</span> LeafCity(<span class="string">&quot;city4&quot;</span>,<span class="number">2600000</span>));</span><br><span class="line"></span><br><span class="line">        Composite China = <span class="keyword">new</span> Composite();</span><br><span class="line">        China.add(AnHui);</span><br><span class="line">        China.add(JiangSu);</span><br><span class="line">        System.out.println(<span class="string">&quot;Num in China:&quot;</span>+China.count());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Num in Jiangsu2200000</span></span><br><span class="line"><span class="comment">Num in China:5200000</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="9-外观模式"><a href="#9-外观模式" class="headerlink" title="9 外观模式"></a>9 外观模式</h1><ul>
<li>为子系统中的一组接口提供一个一致的界面，Facade模式定义了一个高级接口，这个接口使得这一子系统更加容易使用</li>
<li>缺点：违反OCP<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.facadepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Facade facade = <span class="keyword">new</span> Facade();	<span class="comment">// 外观类统一调配</span></span><br><span class="line">        facade.on();</span><br><span class="line">        facade.setParameters();</span><br><span class="line">        facade.off();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Facade.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.facadepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TV tv;</span><br><span class="line">    <span class="keyword">private</span> Fridge fridge;</span><br><span class="line">    <span class="keyword">private</span> Aircondition aircondition;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Facade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tv = TV.getInstance();</span><br><span class="line">        <span class="keyword">this</span>.aircondition = Aircondition.getInstance();</span><br><span class="line">        <span class="keyword">this</span>.fridge = Fridge.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">on</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        tv.on();</span><br><span class="line">        fridge.on();</span><br><span class="line">        aircondition.on();</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setParameters</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        fridge.setTemperature(<span class="number">3</span>);</span><br><span class="line">        aircondition.setTemperature(<span class="number">20</span>);</span><br><span class="line">        tv.setVolume(<span class="number">18</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Para set \n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">off</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        tv.off();</span><br><span class="line">        aircondition.off();</span><br><span class="line">        System.out.println(<span class="string">&quot;Fridge is not off&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TV.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.facadepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TV</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> volume = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">TV</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> TV instance = <span class="keyword">new</span> TV();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TV <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">off</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TV is off. &quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.printVolume();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVolume</span><span class="params">(<span class="keyword">int</span> volume)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.volume = volume;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printVolume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Volume of this tv is &quot;</span> + <span class="keyword">this</span>.volume);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">on</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TV is on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Aircondition.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.facadepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Aircondition</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> temperature = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Aircondition</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Aircondition instance = <span class="keyword">new</span> Aircondition();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Aircondition <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">off</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Air condition is off&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Temperature of this air condition is &quot;</span> + <span class="keyword">this</span>.temperature);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTemperature</span><span class="params">(<span class="keyword">int</span> temperature)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.temperature = temperature;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">on</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Air condition is on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Fridge.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.facadepattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fridge</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> temperature = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Fridge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Fridge instance = <span class="keyword">new</span> Fridge();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Fridge <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">off</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Fridge is off&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Temperature of this fridge is &quot;</span> + <span class="keyword">this</span>.temperature);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTemperature</span><span class="params">(<span class="keyword">int</span> temperature)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.temperature = temperature;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">on</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Fridge is on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">TV is on</span></span><br><span class="line"><span class="comment">Fridge is on</span></span><br><span class="line"><span class="comment">Air condition is on</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Para set </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">TV is off. </span></span><br><span class="line"><span class="comment">Volume of this tv is 18</span></span><br><span class="line"><span class="comment">Air condition is off</span></span><br><span class="line"><span class="comment">Temperature of this air condition is 20</span></span><br><span class="line"><span class="comment">Fridge is not off</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="10-享元模式"><a href="#10-享元模式" class="headerlink" title="10 享元模式"></a>10 享元模式</h1><ul>
<li><p>运用共享技术有效地支持大量细类度的对象</p>
<ul>
<li><font color="red">共享通用对象</font>，减少内存的使用，提升系统的访问效率。而这部分共享对象通常⽐较耗费内存或者需要查询⼤量接⼝或者使用数据库资源，因此统一抽离作为共享对象使⽤用，例如池技术：String常量池、数据库连接池、缓冲池，复用某一对象</li>
<li>通过设置不同元素<font color="red">重用现有的同类对象</font>，减少内存的占⽤</li>
</ul>
</li>
<li><p>组成</p>
<ul>
<li>FlyWeightFactory 用于构建池容器，提供对象获取的方法</li>
<li>FlyWeight 抽象的享元角色, 他是产品的抽象类, 同时定义出对象的外部状态和内部状态的接口或实现</li>
<li>ConcreteFlyWeight 是具体的享元角色，是具体的产品类，实现抽象角色定义相关业务 </li>
<li>UnsharedFlyWeight 不可共享的角色，一般不出现在享元工厂类中 </li>
</ul>
</li>
<li><p>PS</p>
<ul>
<li>内部状态指对象共享出来的信息，存储在享元信息内部，并且不回随环境的改变而改变</li>
<li>外部状态指对象得以依赖的一个标记，随环境的改变而改变，不可共享</li>
</ul>
</li>
</ul>
<h2 id="Situation1-1"><a href="#Situation1-1" class="headerlink" title="Situation1"></a>Situation1</h2><ul>
<li>共享通用对象 池技术<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.flywieghtpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        BikeFlyWeight bike1 = MoBikeFlyWeightFactory.getInstance().getBike();</span><br><span class="line">        bike1.ride(<span class="keyword">new</span> UserUnsharedFlyWeight(<span class="string">&quot;Jack&quot;</span>));</span><br><span class="line">        bike1.back();</span><br><span class="line"></span><br><span class="line">        BikeFlyWeight bike2 = MoBikeFlyWeightFactory.getInstance().getBike();</span><br><span class="line">        bike2.ride(<span class="keyword">new</span> UserUnsharedFlyWeight(<span class="string">&quot;Jim&quot;</span>));</span><br><span class="line"></span><br><span class="line">        BikeFlyWeight bike3 = MoBikeFlyWeightFactory.getInstance().getBike();</span><br><span class="line">        bike3.ride(<span class="keyword">new</span> UserUnsharedFlyWeight(<span class="string">&quot;John&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Bike bike-1 is used by Jack</span></span><br><span class="line"><span class="comment">Bike bike-1 is returned</span></span><br><span class="line"><span class="comment">Bike bike-1 is used by Jim</span></span><br><span class="line"><span class="comment">Bike bike-2 is used by John</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// BikeFlyWeight.java 内部状态</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.flywieghtpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BikeFlyWeight</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> state = <span class="number">0</span>;  <span class="comment">// 0 unused 1 using</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">ride</span><span class="params">(UserUnsharedFlyWeight user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">back</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UserUnsharedFlyWeight.java 外部状态</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.flywieghtpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserUnsharedFlyWeight</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserUnsharedFlyWeight</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MoBikeFlyWeightFactory.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.flywieghtpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MoBikeFlyWeightFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MoBikeFlyWeightFactory instance = <span class="keyword">new</span> MoBikeFlyWeightFactory();  <span class="comment">//单例模式</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;BikeFlyWeight&gt; pool = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MoBikeFlyWeightFactory <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MoBikeFlyWeightFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            pool.add(<span class="keyword">new</span> MoBikeFlyWeight(<span class="string">&quot;bike-&quot;</span> + i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BikeFlyWeight <span class="title">getBike</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (BikeFlyWeight bike : pool) &#123;</span><br><span class="line">            <span class="keyword">if</span> (bike.getState() == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> bike;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MoBikeFlyWeight.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.flywieghtpattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MoBikeFlyWeight</span> <span class="keyword">extends</span> <span class="title">BikeFlyWeight</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String bikeID;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MoBikeFlyWeight</span><span class="params">(String bikeID)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bikeID = bikeID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getBikeID</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bikeID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ride</span><span class="params">(UserUnsharedFlyWeight user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Bike &quot;</span> + <span class="keyword">this</span>.getBikeID() + <span class="string">&quot; is used by &quot;</span> + user.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">back</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(<span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Bike &quot;</span> + <span class="keyword">this</span>.getBikeID()+<span class="string">&quot; is returned&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Situation2-1"><a href="#Situation2-1" class="headerlink" title="Situation2"></a>Situation2</h2><ul>
<li>通过设置不不同元素描述使⽤享元公用对象，重用现有的同类对象，如果未找到匹配的对象，则创建新对象<br><a target="_blank" rel="noopener" href="https://www.runoob.com/design-pattern/flyweight-pattern.html">享元模式 - runoob</a></li>
</ul>
<h1 id="11-代理模式"><a href="#11-代理模式" class="headerlink" title="11 代理模式"></a>11 代理模式</h1><ul>
<li>为其他对象提供一种代理以控制对这个对象的访问</li>
<li><p>组成</p>
<ul>
<li>Subject 接口类 通用方法目标类所要实现的方法</li>
<li>Proxy 代理类 生成代理对象</li>
<li>RealSubject 目标类(被代理类) 生成目标对象</li>
</ul>
</li>
<li><p>主要解决：</p>
<ul>
<li>在直接访问对象时带来的问题，比如说：要访问的对象在远程的机器上。在面向对象系统中，有些对象由于某些原因（比如对象创建开销很大，或者某些操作需要安全控制，或者需要进程外的访问），直接访问会给使用者或者系统结构带来很多麻烦，我们可以在访问此对象时加上一个对此对象的访问层(即代理类)。</li>
</ul>
</li>
</ul>
<h2 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h2><ul>
<li>实现：<ul>
<li>代理类和目标类均实现接口方法，代理类通过构造方法持有目标类对象，代理类中对目标类可以进行功能扩充</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ITeacherDAO.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.proxypattern.staticproxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ITeacherDAO</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">teach</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TeacherDAO.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.proxypattern.staticproxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherDAO</span> <span class="keyword">implements</span> <span class="title">ITeacherDAO</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teach</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Teaching ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ProxyTeacherDAO.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.proxypattern.staticproxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTeacherDAO</span> <span class="keyword">implements</span> <span class="title">ITeacherDAO</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ITeacherDAO target; <span class="comment">// 被代理的对象 通过接口聚合</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyTeacherDAO</span><span class="params">(ITeacherDAO target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teach</span><span class="params">()</span> </span>&#123;   <span class="comment">// 代理类中可以扩充方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Proxying ...&quot;</span>);</span><br><span class="line">        target.teach();</span><br><span class="line">        System.out.println(<span class="string">&quot;Exit proxy.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Client.java</span></span><br><span class="line"><span class="keyword">package</span> com.java.designpattern.proxypattern.staticproxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TeacherDAO teacherDAO = <span class="keyword">new</span> TeacherDAO();</span><br><span class="line">        ProxyTeacherDAO proxyTeacherDAO = <span class="keyword">new</span> ProxyTeacherDAO(teacherDAO);</span><br><span class="line">        proxyTeacherDAO.teach();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Proxying ...</span></span><br><span class="line"><span class="comment">Teaching ...</span></span><br><span class="line"><span class="comment">Exit proxy.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="动态代理-JDK代理-接口代理"><a href="#动态代理-JDK代理-接口代理" class="headerlink" title="动态代理(JDK代理 接口代理)"></a>动态代理(JDK代理 接口代理)</h2><ul>
<li>实现：<ul>
<li>目标对象仍然需要实现接口方法，代理对象无需实现，使用JDK的API构建代理对象</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"># 1</span><br><span class="line">```Java</span><br></pre></td></tr></table></figure>
<h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"># 1</span><br><span class="line">```Java</span><br></pre></td></tr></table></figure>
<h1 id="1-1"><a href="#1-1" class="headerlink" title="1"></a>1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"># 1</span><br><span class="line">```Java</span><br></pre></td></tr></table></figure>
<h1 id="1-2"><a href="#1-2" class="headerlink" title="1"></a>1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"># 1</span><br><span class="line">```Java</span><br></pre></td></tr></table></figure>
<h1 id="1-3"><a href="#1-3" class="headerlink" title="1"></a>1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"># 1</span><br><span class="line">```Java</span><br></pre></td></tr></table></figure>
<h1 id="1-4"><a href="#1-4" class="headerlink" title="1"></a>1</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/04/23/UML_BASIC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/23/UML_BASIC/" class="post-title-link" itemprop="url">UML基础知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-23 17:48:22" itemprop="dateCreated datePublished" datetime="2020-04-23T17:48:22+08:00">2020-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-29 16:50:46" itemprop="dateModified" datetime="2020-04-29T16:50:46+08:00">2020-04-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="UML优点"><a href="#UML优点" class="headerlink" title="UML优点"></a>UML优点</h1><ol>
<li>开发软件很难直接就开始编码，一般步骤是面向对象分析-面向对象设计-面向对象编程，UML是分析设计阶段的图形表示法。</li>
<li>图形更为直观，讨论设计更改起来更加方便</li>
<li>对于客户，使用图形与其交流也是非常通俗易懂，可以获得用户的反馈</li>
<li>软件分析和设计人员在画这些图的过程中可以对目标问题有更深刻的理解和认识</li>
</ol>
<h1 id="UML分类"><a href="#UML分类" class="headerlink" title="UML分类"></a>UML分类</h1><p>静态模型图-系统的结构<br>类图：类接口之间的关系<br>对象图：程序执行时某个时间点对象的状态(快照)<br>组件图：系统中的程序对于其他软件的依赖关系（库函数）<br>部署图：软件系统在何处物理地运行，硬件部署情况</p>
<p>动态模型图-系统的行为<br>用例图：客户角度描述系统功能 什么样的参与者可以使用什么功能<br>活动图：本质就是流程图，系统的活动判断和分支<br>时序图：对象之间消息传递（方法调用）的时间顺序，谁先调用谁，什么时候返回，对象存在时间有多久<br>协作图：对象的交互过程和对象的关系，要调用哪些函数，返回值是什么（协作图和时序图侧重点不同，但相互等价）<br>状态图：它们可以告知一个对象可以拥有的状态，并且事件(如消息的接收，时间的流逝、错误、条件为真等)会怎样随着时间的推移来影响这些状态</p>
<h1 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h1><p>类名-属性-方法</p>
<p>依赖关系：虚线箭头 - 就是一个类A使用到了另一个类B，而这种使用关系是具有偶然性的、临时性的、非常弱的，但是B类的变化会影响到A。<br>    【依赖关系】：是一种使用的关系，即一个类的实现需要另一个类的协助<br>    【代码表现】：局部变量、方法的参数或者对静态方法的调用<br>    【箭头及指向】：带箭头的虚线，指向被使用者</p>
<p>关联关系：实线箭头（多对一） 实线双向箭头（多对多）- 他体现的是两个类、或者类与接口之间语义级别的一种强依赖关系，比如我和我的朋友；这种关系比依赖更强、不存在依赖关系的偶然性、关系也不是临时性的，一般是长期性的，而且双方的关系一般是平等的、关联可以是单向、双向的。<br>关联（Association)<br>    【关联关系】：是一种拥有的关系，它使一个类知道另一个类的属性和方法；如：老师与学生，丈夫与妻子关联可以是双向的，也可以是单向的。双向的关联可以有两个箭头或者没有箭头，单向的关联有一个箭头。<br>    【代码体现】：成员变量<br>    【箭头及指向】：带普通箭头的实心线，指向被拥有者</p>
<p>聚合关系（部分离开整体可单独存在）：空心菱形实线箭头<br>组成关系（部分离开整体不可单独存在）：实心菱形实线箭头<br>泛化（继承）关系：实线空心箭头<br>实现关系：虚线空心箭头</p>
<h1 id="对象图"><a href="#对象图" class="headerlink" title="对象图"></a>对象图</h1><p>对象名：类名下划线-变量=属性值<br>关联关系-直线</p>
<h1 id="用例图"><a href="#用例图" class="headerlink" title="用例图"></a>用例图</h1><p>Actor 参与者<br>User Case 用例<br>关系 包含关系 扩展关系 泛化关系</p>
<h1 id="时序图"><a href="#时序图" class="headerlink" title="时序图"></a>时序图</h1><p>对象：矩形对象名加下划线<br>生命线：垂直的虚线，对象的生命周期<br>消息：两个对象间的单路通信，一个对象指向另一个对象，返回有虚线</p>
<h1 id="协作图"><a href="#协作图" class="headerlink" title="协作图"></a>协作图</h1><h1 id="0"><a href="#0" class="headerlink" title="0"></a>0</h1><p>正向工程<br>反向工程</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/04/15/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/15/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">编译原理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-15 18:53:10" itemprop="dateCreated datePublished" datetime="2020-04-15T18:53:10+08:00">2020-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-18 23:01:34" itemprop="dateModified" datetime="2020-09-18T23:01:34+08:00">2020-09-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="编译和汇编"><a href="#编译和汇编" class="headerlink" title="编译和汇编"></a>编译和汇编</h1><p>编译：将高级语言翻译成汇编语言或机器语言的过程<br>汇编：将汇编语言翻译成机器语言</p>
<p>源程序-&gt;预处理-&gt;编译-&gt;汇编-&gt;链接-&gt;目标机器代码</p>
<h1 id="编译基本步骤"><a href="#编译基本步骤" class="headerlink" title="编译基本步骤"></a>编译基本步骤</h1><h2 id="词法分析"><a href="#词法分析" class="headerlink" title="词法分析"></a>词法分析</h2><p>词法分析阶段是编译过程的第一个阶段，其任务是从左到右对构成源程序的字符进行扫描，确定单词的类型，将其转换为词法单元token&lt;种别码，属性值&gt;<br>关键字、标识符（多词一码）、常量、运算符、界限符</p>
<h2 id="语法分析"><a href="#语法分析" class="headerlink" title="语法分析"></a>语法分析</h2><p>语法分析是编译的第二个阶段。检查是否有语法错误，根据词法单元构造语法分析树，是源程序的一种中间表示，用于进行语义分析。</p>
<h2 id="语义分析"><a href="#语义分析" class="headerlink" title="语义分析"></a>语义分析</h2><p>收集标识符的属性信息（种属、类型、存储位置、长度、值、作用域）<br>语义检查（变量或过程名未经声明就使用、是否重复声明、类型匹配）</p>
<h2 id="中间代码生成"><a href="#中间代码生成" class="headerlink" title="中间代码生成"></a>中间代码生成</h2><p>三地址码 - 类似于汇编指令格式<br>四元式 -<br>机器无关代码优化</p>
<h2 id="目标代码生成器"><a href="#目标代码生成器" class="headerlink" title="目标代码生成器"></a>目标代码生成器</h2><p>将中间代码转化为目标机器语言<br>机器相关代码优化</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/03/26/Mysql_EXERCISE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/26/Mysql_EXERCISE/" class="post-title-link" itemprop="url">Mysql_Exercise</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-26 12:37:22" itemprop="dateCreated datePublished" datetime="2020-03-26T12:37:22+08:00">2020-03-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-27 12:18:16" itemprop="dateModified" datetime="2020-03-27T12:18:16+08:00">2020-03-27</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Sales"><a href="#Sales" class="headerlink" title="Sales"></a>Sales</h1><ul>
<li>表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM customer;</span><br><span class="line">+-------+-----------+---------+--------------+</span><br><span class="line">| cusno | cusname   | address | tel          |</span><br><span class="line">+-------+-----------+---------+--------------+</span><br><span class="line">| C001  | 杨婷      | 北京    | 010-5328953  |</span><br><span class="line">| C002  | 李和平    | 上海    | 021-62359651 |</span><br><span class="line">| C003  | 和平      | 成都    | 024-3222781  |</span><br><span class="line">| C004  | 冯重传    | 上海    | 021-87265861 |</span><br><span class="line">+-------+-----------+---------+--------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM product;</span><br><span class="line">+-------+--------------+-------+--------+</span><br><span class="line">| prono | proname      | price | stocks |</span><br><span class="line">+-------+--------------+-------+--------+</span><br><span class="line">| P0001 | 液晶电视     |  5600 |    800 |</span><br><span class="line">| P0002 | 空调         |  2390 |    460 |</span><br><span class="line">| P0003 | 洗衣机       |  3700 |    600 |</span><br><span class="line">| P0004 | 电热水器     |   890 |    120 |</span><br><span class="line">+-------+--------------+-------+--------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM proout;</span><br><span class="line">+------------+-------+-------+----------+</span><br><span class="line">| saledate   | cusno | prono | quantity |</span><br><span class="line">+------------+-------+-------+----------+</span><br><span class="line">| 2007-10-27 | C001  | P0001 |        3 |</span><br><span class="line">| 2007-11-06 | C004  | P0003 |       40 |</span><br><span class="line">| 2007-12-27 | C001  | P0003 |        5 |</span><br><span class="line">| 2008-03-15 | C002  | P0002 |       12 |</span><br><span class="line">| 2008-05-02 | C003  | P0002 |       21 |</span><br><span class="line">| 2008-05-02 | C003  | P0001 |        9 |</span><br><span class="line">| 2008-11-21 | C004  | P0001 |       73 |</span><br><span class="line">| 2008-09-21 | C004  | P0001 |       30 |</span><br><span class="line">+------------+-------+-------+----------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 视图，每种商品的数量和总额</span><br><span class="line">mysql&gt; select product.prono,sum(quantity),sum(quantity*price) from product,proout</span><br><span class="line">    -&gt; where product.prono&#x3D;proout.prono</span><br><span class="line">    -&gt; group by product.prono;</span><br><span class="line">+-------+---------------+---------------------+</span><br><span class="line">| prono | sum(quantity) | sum(quantity*price) |</span><br><span class="line">+-------+---------------+---------------------+</span><br><span class="line">| P0001 |           115 |              644000 |</span><br><span class="line">| P0002 |            33 |               78870 |</span><br><span class="line">| P0003 |            45 |              166500 |</span><br><span class="line">+-------+---------------+---------------------+</span><br><span class="line">3 rows in set (0.00 s</span><br><span class="line"></span><br><span class="line"># 0002商品的买家姓名电话</span><br><span class="line">mysql&gt; select cusno,cusname,tel from customer</span><br><span class="line">    -&gt; where cusno in(</span><br><span class="line">    -&gt; select cusno from proout</span><br><span class="line">    -&gt; where prono&#x3D;&#39;P0002&#39;)</span><br><span class="line">    -&gt; order by cusno desc;</span><br><span class="line">+-------+-----------+--------------+</span><br><span class="line">| cusno | cusname   | tel          |</span><br><span class="line">+-------+-----------+--------------+</span><br><span class="line">| C003  | 和平      | 024-3222781  |</span><br><span class="line">| C002  | 李和平    | 021-62359651 |</span><br><span class="line">+-------+-----------+--------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"># 销售数量超过100</span><br><span class="line">mysql&gt; select sum(quantity),prono from proout</span><br><span class="line">    -&gt; group by prono</span><br><span class="line">    -&gt; having sum(quantity)&gt;100;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| sum(quantity) | prono |</span><br><span class="line">+---------------+-------+</span><br><span class="line">|           115 | P0001 |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>create table student(Sid varchar(10),Sname nvarchar(10),Sage datetime,Ssex nvarchar(10));<br>insert into student values(‘01’ , N’赵雷’ , ‘1990-01-01’ , N’男’)<br>,(‘02’ , N’钱电’ , ‘1990-12-21’ , N’男’)<br>,(‘03’ , N’孙风’ , ‘1990-05-20’ , N’男’)<br>,(‘04’ , N’李云’ , ‘1990-08-06’ , N’男’)<br>,(‘05’ , N’周梅’ , ‘1991-12-01’ , N’女’)<br>,(‘06’ , N’吴兰’ , ‘1992-03-01’ , N’女’)<br>,(‘07’ , N’郑竹’ , ‘1989-07-01’ , N’女’)<br>,(‘08’ , N’王菊’ , ‘1990-01-20’ , N’女’);</p>
<p>create table course(Cid varchar(10),Cname nvarchar(10),Tid varchar(10));<br>insert into course values(‘01’ , N’语文’ , ‘02’)<br>,(‘02’ , N’数学’ , ‘01’)<br>,(‘03’ , N’英语’ , ‘03’);</p>
<p>create table teacher(Tid varchar(10),Tname nvarchar(10));<br>insert into teacher values(‘01’ , N’张三’)<br>,(‘02’ , N’李四’)<br>,(‘03’ , N’王五’);</p>
<p>create table sc(Sid varchar(10),Cid varchar(10),score decimal(18,1));<br>insert into sc values(‘01’ , ‘01’ , 80)<br>,(‘01’ , ‘02’ , 90)<br>,(‘01’ , ‘03’ , 99)<br>,(‘02’ , ‘01’ , 70)<br>,(‘02’ , ‘02’ , 60)<br>,(‘02’ , ‘03’ , 80)<br>,(‘03’ , ‘01’ , 80)<br>,(‘03’ , ‘02’ , 80)<br>,(‘03’ , ‘03’ , 80)<br>,(‘04’ , ‘01’ , 50)<br>,(‘04’ , ‘02’ , 30)<br>,(‘04’ , ‘03’ , 20)<br>,(‘05’ , ‘01’ , 76)<br>,(‘05’ , ‘02’ , 87)<br>,(‘06’ , ‘01’ , 31)<br>,(‘06’ , ‘03’ , 34)<br>,(‘07’ , ‘02’ , 89)<br>,(‘07’ , ‘03’ , 98);</p>
<p>+———+————+———+<br>| Cid  | Cname  | Tid  |<br>+———+————+———+<br>| 01   | 语文   | 02   |<br>| 02   | 数学   | 01   |<br>| 03   | 英语   | 03   |<br>+———+————+———+<br>3 rows in set (0.00 sec)</p>
<p>+———+———+———-+<br>| Sid  | Cid  | score |<br>+———+———+———-+<br>| 01   | 01   |  80.0 |<br>| 01   | 02   |  90.0 |<br>| 01   | 03   |  99.0 |<br>| 02   | 01   |  70.0 |<br>| 02   | 02   |  60.0 |<br>| 02   | 03   |  80.0 |<br>| 03   | 01   |  80.0 |<br>| 03   | 02   |  80.0 |<br>| 03   | 03   |  80.0 |<br>| 04   | 01   |  50.0 |<br>| 04   | 02   |  30.0 |<br>| 04   | 03   |  20.0 |<br>| 05   | 01   |  76.0 |<br>| 05   | 02   |  87.0 |<br>| 06   | 01   |  31.0 |<br>| 06   | 03   |  34.0 |<br>| 07   | 02   |  89.0 |<br>| 07   | 03   |  98.0 |<br>+———+———+———-+<br>18 rows in set (0.00 sec)</p>
<p>+———+————+——————————-+———+<br>| Sid  | Sname  | Sage                | Ssex |<br>+———+————+——————————-+———+<br>| 01   | 赵雷   | 1990-01-01 00:00:00 | 男   |<br>| 02   | 钱电   | 1990-12-21 00:00:00 | 男   |<br>| 03   | 孙风   | 1990-05-20 00:00:00 | 男   |<br>| 04   | 李云   | 1990-08-06 00:00:00 | 男   |<br>| 05   | 周梅   | 1991-12-01 00:00:00 | 女   |<br>| 06   | 吴兰   | 1992-03-01 00:00:00 | 女   |<br>| 07   | 郑竹   | 1989-07-01 00:00:00 | 女   |<br>| 08   | 王菊   | 1990-01-20 00:00:00 | 女   |<br>+———+————+——————————-+———+<br>8 rows in set (0.00 sec)</p>
<p>+———+————+<br>| Tid  | Tname  |<br>+———+————+<br>| 01   | 张三   |<br>| 02   | 李四   |<br>| 03   | 王五   |<br>+———+————+</p>
<p>打印02号比03号大或者相等的成绩信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select a.*,b.* from (select * from sc where sid&#x3D;&#39;02&#39;) a</span><br><span class="line">    -&gt; left join (select * from sc where sid &#x3D;&#39;03&#39;)b on</span><br><span class="line">    -&gt; a.cid&#x3D;b.cid</span><br><span class="line">    -&gt; where a.score&gt;&#x3D;b.score;</span><br><span class="line">+------+------+-------+------+------+-------+</span><br><span class="line">| Sid  | Cid  | score | Sid  | Cid  | score |</span><br><span class="line">+------+------+-------+------+------+-------+</span><br><span class="line">| 02   | 03   |  80.0 | 03   | 03   |  80.0 |</span><br><span class="line">+------+------+-------+------+------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/03/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">操作系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-25 15:23:22" itemprop="dateCreated datePublished" datetime="2020-03-25T15:23:22+08:00">2020-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-15 17:52:46" itemprop="dateModified" datetime="2020-05-15T17:52:46+08:00">2020-05-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="内存扩充"><a href="#内存扩充" class="headerlink" title="内存扩充"></a>内存扩充</h1><p>覆盖技术：依照程序执行的逻辑顺序，互斥的程序段共享一个覆盖区<br>交换（对换）技术：把一些暂时不用的进程（阻塞态或者低优先级的）换到外存中，获取内存空间<br>虚拟存储技术：只将部分程序先调入内存运行（局部性原理，程序运行只局限于某个程序段，或者只使用某个存储空间）</p>
<h1 id="进程线程"><a href="#进程线程" class="headerlink" title="进程线程"></a>进程线程</h1><p>18.简述一下线程的特点<br>答：①轻型实体 线程中的实体基本上不拥有系统资源，只是有一点必不可少的、能保证独立运行的资源。<br>②独立调度和分派的基本单位。<br>在多线程OS中，线程是能独立运行的基本单位，因而也是独立调度和分派的基本单位<br>③    可并发执行<br>④    共享进程资源，同一进程中的各个线程，都可以共享该进程所拥有的资源<br>19.简述进程的特点<br>答：①动态性：进程是程序的一次执行，它有着创建、活动、暂停、终止等过程，具有一定的生命周期，是动态地产生、变化和消亡的<br>②并发性：指多个进程实体，同存于内存中，能在一段时间内同时运行，并发性是进程的重要特征，同时也是操作系统的重要特征<br>③    独立性：指进程实体是一个能独立运行、独立获得资源和独立接受调度的基本单位<br>④    异步性：由于进程的相互制约，使进程具有执行的间断性，即进程按各自独立的、 不可预知的速度向前推进。异步性会导致执行结果的不可再现性<br>⑤    结构性：每个进程都配置一个PCB对其进行描述。从结构上看，进程实体是由程序段、数据段和进程控制段三部分组成的。<br>20.进程和线程的延伸题目<br>进程与线程的比较：①调度单位，在引入线程的操作系统中，进程只作为资源分配的基本单位，线程则作为调度和分派的基本单位②在引入线程的操作系统中，不仅进程之间可以并发执行，一个进程中的多个线程也可以并发执行。③拥有资源，进程是拥有资源的独立单位，线程基本上不拥有资源，只用有少量不可少的资源④系统开销，在进程中创建一个新的线程比创建一个新的进程所需要的时间要少，撤销一个线程比撤销一个进程需要的时间要少，线程之间的切换比进程之间的切换花费的时间要少。</p>
<h1 id="信号量机制实现同步和互斥"><a href="#信号量机制实现同步和互斥" class="headerlink" title="信号量机制实现同步和互斥"></a>信号量机制实现同步和互斥</h1><p>PS：实现互斥操作的P要走实现同步的P之后</p>
<h2 id="信号量分类"><a href="#信号量分类" class="headerlink" title="信号量分类"></a>信号量分类</h2><p>整形信号量：有一个用于表示资源数量的变量，缺点：忙等<br>记录型信号量：一个用于表示资源数量的变量+进程队列，让权等待</p>
<h2 id="信号量实现互斥"><a href="#信号量实现互斥" class="headerlink" title="信号量实现互斥"></a>信号量实现互斥</h2><p>信号量的值设为1<br>进入临界区之前执行P操作 信号量-1，如果信号量小于零则进行阻塞<br>出临界区之后执行V操作 信号量+1，如果信号量大于零则唤醒进程</p>
<h2 id="信号量实现同步"><a href="#信号量实现同步" class="headerlink" title="信号量实现同步"></a>信号量实现同步</h2><p>信号量设置为0<br>先执行的操作执行过后执行V操作<br>后执行的操作执行前执行P操作<br>即可实现多段进程按顺序进行协作</p>
<h1 id="管程"><a href="#管程" class="headerlink" title="管程"></a>管程</h1><p>使用管程则进程之间的互斥操作可以有编译器完成而无需程序员来完成，因而可以更方便地实现同步和互斥操作<br>管程的特点：<br>局部数据只能被局部于管程的过程所访问<br>一个进程只能通过调用管程的过程才能访问管程中的数据<br>一次只能有一个进程进入管程</p>
<h1 id="内存分配方式"><a href="#内存分配方式" class="headerlink" title="内存分配方式"></a>内存分配方式</h1><h2 id="连续分配方式"><a href="#连续分配方式" class="headerlink" title="连续分配方式"></a>连续分配方式</h2><h3 id="单一连续分配"><a href="#单一连续分配" class="headerlink" title="单一连续分配"></a>单一连续分配</h3><p>内存由一道程序独占</p>
<h3 id="固定分区分配"><a href="#固定分区分配" class="headerlink" title="固定分区分配"></a>固定分区分配</h3><p>内存区域实现划分，能装入内存的程序数目有限</p>
<h3 id="动态分区分配"><a href="#动态分区分配" class="headerlink" title="动态分区分配"></a>动态分区分配</h3><p>使用空闲分区表或者空闲分区链表，对内存进行分配</p>
<h4 id="分配算法：基于顺序搜索"><a href="#分配算法：基于顺序搜索" class="headerlink" title="分配算法：基于顺序搜索"></a>分配算法：基于顺序搜索</h4><p>FF（首次适应） 空闲地址按从小到达排序，从头开始找一个满足要求的空闲分区，造成低地址碎片较多<br>NF（循环首次/邻近适应） 从上一次分配的空闲分区开始查找，直到找到一个满足要求的空闲分区，空闲分区分布均匀<br>BF（最佳适应） 找到一个最小且能满足要求的空闲分区，每次分割留下的都是些小碎片，长时间就会有很多难利用的小碎片<br>WF（最坏适应） 总是分配最大的空闲分区，产生碎片的可能性最小，但会造成缺乏大空间</p>
<h4 id="分配算法：基于索引搜索"><a href="#分配算法：基于索引搜索" class="headerlink" title="分配算法：基于索引搜索"></a>分配算法：基于索引搜索</h4><p>快速适应算法：相同大小的空闲空间用同一个链表记录，例如2K，4K，8K等等，分配时将一整块进行分配<br>伙伴系统：</p>
<h3 id="动态可重定位分配"><a href="#动态可重定位分配" class="headerlink" title="动态可重定位分配"></a>动态可重定位分配</h3><p>使用紧凑技术，程序不需要作任何修改，拥有重定位寄存器实现地址的重定位</p>
<h2 id="分页分配方式"><a href="#分页分配方式" class="headerlink" title="分页分配方式"></a>分页分配方式</h2><p>使用页表记录逻辑页面和物理块号的映射关系</p>
<h3 id="地址变换"><a href="#地址变换" class="headerlink" title="地址变换"></a>地址变换</h3><p>页号找到对应物理块号<br>物理块的地址加上页内偏移量得到最终物理地址<br>快表：高速缓冲寄存器，内容是页表中的一部分或全部内容，先查询快表如果命中就直接取出物理块号不用再到内存中查询。（查询快表的速度高于内存）（快表命中一次访存一次访问快表，否则要两次访存）</p>
<h1 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h1><h2 id="产生死锁的必要条件"><a href="#产生死锁的必要条件" class="headerlink" title="产生死锁的必要条件"></a>产生死锁的必要条件</h2><ol>
<li>互斥：某一时间某个资源只能被一个进程访问</li>
<li>请求和保持：进程已经拥有一个资源，又请求新的资源，而该资源被其他进程占用</li>
<li>不可抢占：资源是不可抢占的，该资源被分配出去在未使用完之前是不可被抢占的</li>
<li>循环等待：死锁的进程一个等待另一个，资源分配图是环形的</li>
</ol>
<h2 id="预防死锁"><a href="#预防死锁" class="headerlink" title="预防死锁"></a>预防死锁</h2><ol>
<li>安全序列，以某种不会引起死锁的资源分配次序给进程分配资源</li>
<li>破坏请求和保持条件：1)把该进程要用到的所有资源都分配给它 2)先给一部分，再请求新的资源时要释放原来占有的资源</li>
<li>破坏不可抢占：选一个代价比较小的，将其资源回收</li>
<li>破坏循环等待：将系统资源分等级，资源请求必须先从低等级开始，就不会产生环</li>
</ol>
<h1 id="虚拟存储器"><a href="#虚拟存储器" class="headerlink" title="虚拟存储器"></a>虚拟存储器</h1><p>虚拟存储器：在逻辑上对内存容量加以扩充的存储器系统，有基本的请求调入和置换功能<br>多次性：作业多次调入内存运行<br>对换性：换入换出<br>虚拟性：逻辑上扩充内存</p>
<h2 id="请求分页的硬件支持"><a href="#请求分页的硬件支持" class="headerlink" title="请求分页的硬件支持"></a>请求分页的硬件支持</h2><ol>
<li>请求分页页表机制，对传统的页表作了一些扩充</li>
<li>缺页中断机构</li>
<li>地址变换机构</li>
</ol>
<h2 id="请求分页内存分配策略"><a href="#请求分页内存分配策略" class="headerlink" title="请求分页内存分配策略"></a>请求分页内存分配策略</h2><p>固定分配：分配给每个进程的物理块数目不变<br>可变分配：可根据情况适当增加啊或减少物理块的分配<br>局部置换：置换时，只能在原先分配的物理块中置换<br>全局置换：置换时，可获得新的物理块</p>
<p>固定分配局部置换，<br>可变分配全局置换，只要产生了缺页中断就获得新物理块<br>可变分配局部置换，只有在缺页率比较高的时候才分配新物理块</p>
<h2 id="页面置换算法-缺页时选择将哪页调出内存"><a href="#页面置换算法-缺页时选择将哪页调出内存" class="headerlink" title="页面置换算法 缺页时选择将哪页调出内存"></a>页面置换算法 缺页时选择将哪页调出内存</h2><p>OPT（最优置换算法）根据未来工作集的状况，优先淘汰内存中未来很长一段时间不会访问（或者永远不会访问）的页面 难以实现，无法预测<br>FIFO （先入先出） 性能差 贝拉迪异常（给的物理块多反而缺页次数更多）<br>LRU（最近最久未使用） 根据页面在内存中的上一次被访问到现在的时间来淘汰页面 使用寄存器（记录时间），栈实现 开销大<br>LFU（最少使用）寄存器记录页面访问次数，次数最少的优先淘汰</p>
<p>Clock置换算法 不需要寄存器，每页设置访问位，通过链接连成循环队列，访问过的页面访问位置1，淘汰时优先淘汰访问位为0的页面 开销均衡</p>
<h2 id="抖动"><a href="#抖动" class="headerlink" title="抖动"></a>抖动</h2><p>抖动：系统中进程太多，每个进程持有的物理块太少，就会导致大量进程缺页，进而造成频繁地换入换出<br>工作集：某段时间间隔内，进程要访问的页面集合<br>驻留集：</p>
<p>抖动预防：</p>
<ol>
<li>暂停某些进程，减少系统中的进程数量</li>
<li>L=S准则 L缺页的平均时间 S置换页面的平均时间</li>
<li>采用局部置换，将抖动限定在很小的范围内</li>
</ol>
<h1 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h1><h2 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h2><p>文件目录是一种特殊的有结构的文件<br>FCB文件控制块是文件目录中的一项，一个文件有一个FCB<br>FCB实现按名存取，实现文件名和物理地址的映射</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p>单级目录结构：整个系统只有一张目录，不允许重名<br>两级目录结构：主文件目录MFD-存放用户的目录 用户文件目录UFD-每个用户拥有的文件的目录 不同用户的文件可以重名<br>多级目录结构：树形目录结构 根目录 不同目录下的文件可以重名-不便实现文件共享<br>绝对路径，从根目录开始<br>相对路径，从当前目录开始 减少I/O次数<br>无环图目录结构：不同文件名指向一个文件<br>共享计数器，文件被共享的用户数目，为0才可以删除</p>
<h2 id="索引节点（FCB改进技术）-减少磁盘I-O"><a href="#索引节点（FCB改进技术）-减少磁盘I-O" class="headerlink" title="索引节点（FCB改进技术）- 减少磁盘I/O"></a>索引节点（FCB改进技术）- 减少磁盘I/O</h2><p>将除文件名之外的所有信息用索引指针链接单独存放<br>FCB就只剩下文件名和索引指针，单个磁盘块可存放的FCB就增多，可以减少I/O次数</p>
<h1 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h1><h2 id="外存组织方式-文件存储的方式"><a href="#外存组织方式-文件存储的方式" class="headerlink" title="外存组织方式:文件存储的方式"></a>外存组织方式:文件存储的方式</h2><ol>
<li>连续组织方式</li>
<li>链式组织方式</li>
<li>索引组织方式</li>
</ol>
<h3 id="连续组织方式"><a href="#连续组织方式" class="headerlink" title="连续组织方式"></a>连续组织方式</h3><p>速度快，磁盘碎片多</p>
<h3 id="链式组织方式"><a href="#链式组织方式" class="headerlink" title="链式组织方式"></a>链式组织方式</h3><p>隐式链接 文件末尾指针指向下一个文件所在盘块<br>显示链接 FCB存放文件的第一个盘块号 FAT存放在内存中艺链表形式指向下一个盘块所在的物理块号、</p>
<p>簇：一组相邻的扇区，操作系统读写硬盘的最小单位</p>
<h3 id="索引组织方式"><a href="#索引组织方式" class="headerlink" title="索引组织方式"></a>索引组织方式</h3><p>为文件提供索引表（类似于页表），逻辑块和物理块的映射关系，该文件占有的盘块记录在表中，当使用到哪个文件时，只将该文件的盘号调入内存<br>单一索引 索引块容量够<br>多级索引 索引块容量不够，一个文件有多个索引块，索引块之间有有索引将它们连接</p>
<h2 id="空闲空间的管理方式"><a href="#空闲空间的管理方式" class="headerlink" title="空闲空间的管理方式"></a>空闲空间的管理方式</h2><h3 id="空闲表法，用于连续分配方式"><a href="#空闲表法，用于连续分配方式" class="headerlink" title="空闲表法，用于连续分配方式"></a>空闲表法，用于连续分配方式</h3><p>记录了空闲区的第一个盘块号和剩余空闲盘区数</p>
<h3 id="空闲链表法"><a href="#空闲链表法" class="headerlink" title="空闲链表法"></a>空闲链表法</h3><p>空闲盘块链<br>空闲盘区链（盘区包含若干盘块）</p>
<h3 id="位视图法，二维数组记录盘块使用情况"><a href="#位视图法，二维数组记录盘块使用情况" class="headerlink" title="位视图法，二维数组记录盘块使用情况"></a>位视图法，二维数组记录盘块使用情况</h3><h3 id="成组链接法，UNIX适用于大系统"><a href="#成组链接法，UNIX适用于大系统" class="headerlink" title="成组链接法，UNIX适用于大系统"></a>成组链接法，UNIX适用于大系统</h3><p>盘块栈记录了空闲盘块的数目和盘块号<br>盘块栈的第一个盘块用于记录下一个盘块栈的盘块号，其余用于分配文件</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/03/23/Machine%20Learing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/23/Machine%20Learing/" class="post-title-link" itemprop="url">Machine Learning</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-23 22:55:42" itemprop="dateCreated datePublished" datetime="2020-03-23T22:55:42+08:00">2020-03-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-08 16:15:44" itemprop="dateModified" datetime="2020-04-08T16:15:44+08:00">2020-04-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="机器学习"><a href="#机器学习" class="headerlink" title="机器学习"></a>机器学习</h2><p>定义：假设用P（Performace）来评估计算机程序在某类任务T（Task）上的性能，若一个程序通过利用经验E（Experience）在T中任务上获得了性能改善，则我们就说关于T和P，该程序对E进行了学习<br>个人理解：通过数据对模型进行训练后，模型可以用于预测新的数据</p>
<p>机器学习的分类：监督学习，无监督学习，强化学习（半监督学习）</p>
<h3 id="深度学习"><a href="#深度学习" class="headerlink" title="深度学习"></a>深度学习</h3><h3 id="监督学习："><a href="#监督学习：" class="headerlink" title="监督学习："></a>监督学习：</h3><p>定义：有数据和数据对应的正确标签，从给定的训练数据集中学习出一个函数（模型参数），当新的数据到来时，可以根据这个函数预测结果。<br>典例：分类（预测的结果是离散的）和回归（预测的结果是连续的） 相似度学习（排名系统，推荐系统）</p>
<p>分类问题：kNN、决策树、逻辑斯谛回归<br>回归问题：线性回归非线性回归</p>
<h3 id="无监督学习："><a href="#无监督学习：" class="headerlink" title="无监督学习："></a>无监督学习：</h3><p>定义：输入数据没有被标记，也没有确定的结果。<br>典例：聚类。聚类的目的在于把相似的东西聚在一起，而我们并不关心这一类是什么</p>
<p>聚类问题：k均值算法<br>降维问题：</p>
<p>应用：搜索联想 百度的相关搜索 新闻推送，把相同类型的新闻聚集在一起</p>
<h3 id="强化学习"><a href="#强化学习" class="headerlink" title="强化学习:"></a>强化学习:</h3><p>强化学习一开始它并没有数据和标签.只是设立一个评价规则，它是通过环境给出的奖惩来学习<br>算法：遗传算法</p>
<h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><p>损失函数：用来评判模型预测的误差大小的函数<br>01损失函数 平方损失函数 绝对值损失函数 对数损失函数 经验风险</p>
<p>经验风险：模型关于训练集的平均损失</p>
<p>超参数：比如神经网络的层数和每层神经网络的神经元个数以及正则化的一些参数等等</p>
<p>训练集：<br>验证集：用于模型选择，测试不同超参数的模型<br>测试集：<br>交叉验证：尝试利用不同的训练集/验证集划分来对模型做多组不同的训练/验证</p>
<p>训练误差：训练集上的平均损失<br>测试误差：测试集上的平均损失泛化能力</p>
<p>欠拟合：模型参数在训练集中表现的也不好<br>欠拟合解决方案增加网络复杂度</p>
<p>过拟合：模型参数在训练集中表现很好，测试集中反而不行<br>过拟合解决方案：正则化 L+λJ(f)，抑制消除哪些大的参数（噪声）；Dropout<br>正则化的本质：约束（限制）要优化的参数<br>L1正则：绝对值之和<br>L2正则：平方之和<br>正则化为什么可以抑制过拟合：</p>
<ol>
<li>数学角度 L+λJ(f) J（f）为L1或L2正则化项 拉格朗日乘数法（条件极值） 正则化项等价于带约束条件 参数就会限定在某一范围模型复杂度下降</li>
<li>L1正则化稀疏性（很多参数为零，特征选择）：</li>
</ol>
<p>解空间的形状（等值线）：<br>（w1+w2 是菱形 容易与等值线交在（顶点）坐标轴处，所以参数为零 w1^2+w2^2 为圆型，相对于L1就不容易交在坐标轴处）</p>
<p>贝叶斯概率角度：<br>根据观察数据估计参数的实际概率分布P(w|D)=p(w)xP(D|w)/P(D)<br>实际概率分布 正比于 先验概率(参数应该分布的样子)x极大似然估计（参数向量w的情况下，观测数据D出现的概率）<br>最大似然估计的目的就是：利用已知的样本结果，反推最有可能（最大概率）导致这样结果的参数值</p>
<p>L1 先验概率分布满足拉普拉斯分布（假设参数满足拉普拉斯分布等价于加入L1正则项）<br>L2 先验概率分布满足正态分布（假设参数满足正态分布等价于加入L2正则项）拉普拉斯分布在零处的概率大</p>
<p>似然函数部分对应于损失函数（经验风险），而先验概率部分对应于正则项<br>L1正则倾向于产生稀疏模型，L2正则对权值高的参数惩罚重</p>
<p>贝叶斯概率的概率分布随着实验的进行不断波动，并且随着实验次数的增加，概率的概率分布将会慢慢收敛</p>
<p>经验风险最小化（ERM）：经验风险的最小的就是最优的模型<br>结构风险最小化（SRM）：ERM基础上加上描述模型复杂度的正则化项</p>
<h2 id="分类问题评判标准"><a href="#分类问题评判标准" class="headerlink" title="分类问题评判标准"></a>分类问题评判标准</h2><p>关注的叫正类，不关注的叫负类<br>TP:<br>TN:<br>FP:将负类预测为正类<br>FN:将正类预测为负类</p>
<p>准确率：分类器正确分类的样本数与总样本之比 (TP+TN)/(TP+TN+FP+FN)<br>精确率：预测为正类中预测正确的比例 TP/(TP+FP)<br>召回率：实际为正类预测正确的比例 TP/(TP+FN)</p>
<h2 id="回归问题的分类"><a href="#回归问题的分类" class="headerlink" title="回归问题的分类"></a>回归问题的分类</h2><p>按照输入变量：一元回归和多元回归<br>按照模型类型：线性回归和非线性回归</p>
<p>损失函数：平方损失函数 凸函数 使用最小二乘法求解</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/03/15/Introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Finyaci">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finyaci's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/15/Introduction/" class="post-title-link" itemprop="url">Introduction</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-15 18:53:11" itemprop="dateCreated datePublished" datetime="2020-03-15T18:53:11+08:00">2020-03-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-02 14:43:30" itemprop="dateModified" datetime="2020-04-02T14:43:30+08:00">2020-04-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h1><p>Good afternoon, my respected professor(s)!It is my honor to be here for this interview.My name is Yangchenhao and I am 23 years old.I was born in Zhenjiang,Jurong,a silent town not far from here.</p>
<p>I graduated from Changzhou Institute of Technology and my major is Electrical Engineering and Automation.During the past four years,I had passed the CET-6 and achieved the second prize in Jiangsu Undergraduate Mathematical Contest in Modeling.When I was in my sophomore and junior year,I also won some college scholarship.So I think I am a diligent student in study.</p>
<p>During my study,I become more and more interested in Computers Secience.One reason is that my major is highly related to Computer Science.The other should be benefit to the Internet, I can learn some courses belonging to Computer Science through Internet.I think these courses are very intererting.Among these courses,I like Deep Learning best. And my Graduation Design also use these konwledge.Therefore,I want to learn Computer Science in the future. If I was admitted by Jiangsu University,I wish I could study Machine Learing and Computer Vision or something related to Artificial Intelligence.</p>
<p>Next,I will talk about my hobbies.In my spare time,I like doing some reading ,especially those books about history and some detective novels.Through history I knowed many famous person and many different country’s civilization.Besides,I also like progarmming and I can use some progarmming language just like C Python and Java.I used them to write some projects such as tetris and web spider befroe.</p>
<p>As to my characters,I think I am a patient people, but I could be a litte stubborn sometime.At school,most of my classmate think I am a kind friend. And at family,my mother and father think I am a good son.</p>
<p>That’s all thanks.</p>
<p>Spain Isabel    英[ˈɪzəbɛl]<br>England Her Majesty Queen Elizabeth 英[ɪˈlɪzəbəθ]<br>France Napoléon<br>Washington lead independence movement</p>
<p>image recognition<br>natural language processing<br>Generative Adversarial Networks [ˌædvəˈseəriəl] </p>
<h1 id="2"><a href="#2" class="headerlink" title="2"></a>2</h1><p>基本信息<br>为什么喜欢计算机<br>兴趣<br>性格</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Finyaci</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Finyaci</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
